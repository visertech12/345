import{a as t,b8 as e,i as o,b9 as a,q as s,t as i,w as l,u as n,v as r,x as c,y as h,z as u,H as d,b5 as f}from"./index-DJtkXLbk.js";import{_ as p}from"./fui-icon.Di2eQoC1.js";import{r as m}from"./uni-app.es.DnKBEGT2.js";import{_ as b}from"./fui-nav-bar.jzMwm7nO.js";import{_}from"./fui-button.Bz1nWTaC.js";import{_ as v}from"./alert.Dea_H56C.js";import{_ as g}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-popup-dialog.BcHbARwi.js";import"./uni-popup.CzvQehha.js";var $,y=300;const x=g({data(){return{title:"",onFocus:!1,account:"",o:"",stxt:this.$t("authPop.resend"),title:this.$t("financing.t96"),content:"",code:""}},onLoad(t){this.title="email"==t.type?this.$t("secrety.email_ver"):this.$t("secrety.phone_ver"),$=t.type,this.account=t.account,this.o=t.o},onReady(){this.initInterval()},computed:{...t(["userTheme"])},methods:{submit(){if(this.code.length<6)return!1;e(),o.validatePhoneCode(this.account,this.o,this.code).then((t=>{a(),200==t.code?this.$mroute.setPwd(this.account,this.code,this.o):(this.title=this.$t("auth.t6"),this.content=t.message,this.$refs.alert.open())}))},initInterval(){y=300;var t=this,e=setInterval((()=>{y<=1?(clearInterval(e),this.stxt=t.$t("authPop.resend"),y=0):(this.stxt=y+"s",y--)}),1e3)},sendCode(){"phone"==$&&(e(),o.sendPhoneVerifyCode(this.account,this.showareacode).then((t=>{a(),200==t.code?(this.content=this.$t("auth.t7"),this.$refs.alert.open(),this.initInterval()):(this.content=t.message,this.$refs.alert.open())}))),"email"==$&&(e(),o.sendEmailVerifyCode(this.email).then((t=>{a(),200==t.code?(this.content=this.$t("auth.t7"),this.$refs.alert.open(),this.initInterval()):(this.content=t.message,this.$refs.alert.open())})))}}},[["render",function(t,e,o,a,g,$){const y=m(s("fui-icon"),p),x=m(s("fui-nav-bar"),b),k=d,C=n,j=f,I=m(s("fui-button"),_),w=m(s("alert"),v);return r(),i(C,{class:"phoneVerification","data-theme":t.userTheme},{default:l((()=>[c(x,{statusBar:"",isFixed:"",isOccupy:"",zIndex:"9",title:g.title,color:"var(--color-title-black)",background:"var(--white)",onLeftClick:e[0]||(e[0]=e=>t.$mroute.back())},{default:l((()=>[c(y,{name:"arrowleft",size:"56",color:"var(--color-title-black)"})])),_:1},8,["title"]),c(C,{class:"phoneVif-body"},{default:l((()=>[c(C,{class:"body-tips"},{default:l((()=>[c(k,{class:"font-13 color-gray"},{default:l((()=>[h(u(t.$t("auth.t1")),1)])),_:1}),c(k,{class:"font-13 color-black phone-number"},{default:l((()=>[h(u(g.account?g.account:"--"),1)])),_:1}),c(k,{class:"font-13 color-blue font-weight",onClick:e[1]||(e[1]=t=>$.sendCode())},{default:l((()=>[h(u(t.$t("auth.t2")),1)])),_:1})])),_:1}),c(C,{class:"body-label mt-15"},{default:l((()=>[c(k,{class:"font-13 color-gray"},{default:l((()=>[h(u(g.title+t.$t("auth.t3")),1)])),_:1}),c(C,{class:"body-label-input mt-10"},{default:l((()=>[c(j,{modelValue:g.code,"onUpdate:modelValue":e[2]||(e[2]=t=>g.code=t),type:"text",placeholder:t.$t("auth.t4"),"placeholder-class":"placeholder"},null,8,["modelValue","placeholder"]),c(k,{class:"font-13 color-blue font-weight",onClick:e[3]||(e[3]=t=>$.sendCode())},{default:l((()=>[h(u(g.stxt),1)])),_:1})])),_:1})])),_:1}),c(C,{class:"body-buttons"},{default:l((()=>[c(I,{height:"88rpx",radius:"16rpx",size:"30",background:g.code.length>=6?"var(--blue)":"var(--color-gray-bg)",color:g.code.length>=6?"#ffffff":"var(--color-text-dark-gray)",text:t.$t("auth.t5"),onClick:e[4]||(e[4]=t=>$.submit())},null,8,["background","color","text"])])),_:1})])),_:1}),c(w,{ref:"alert",title:g.title,content:g.content},null,8,["title","content"])])),_:1},8,["data-theme"])}],["__scopeId","data-v-af98f03f"]]);export{x as default};
