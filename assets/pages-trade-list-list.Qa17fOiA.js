import{g as t,a as e,l as r,q as o,aX as s,t as l,w as a,u as i,v as c,x as n,A as d,B as f,C as h,F as u,E as p,D as g,y as _,z as y,H as w,G as m,K as k,L as b,S as $}from"./index-DJtkXLbk.js";import{_ as x}from"./fui-icon.Di2eQoC1.js";import{r as v}from"./uni-app.es.DnKBEGT2.js";import{_ as T}from"./fui-nav-bar.jzMwm7nO.js";import{_ as C}from"./fui-tabs.7FauFIrc.js";import{_ as L}from"./fui-tag.DcXe62xw.js";import{_ as S}from"./refresher.D6XCcWyA.js";import{_ as O}from"./fui-bottom-popup.D5yJPoCm.js";import{_ as j}from"./alert.Dea_H56C.js";import{_ as R}from"./loading.4tTz4-j4.js";import{t as z}from"./trade.CbLLhnJS.js";import{_ as H}from"./fui-empty.DSVpH_3j.js";import{f as D}from"./fui-bottom-popup.BN1-lEtb.js";import{c as I}from"./scroll.svIIaz86.js";import{_ as U}from"./check-select.DVgewoGK.js";import{_ as F}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-popup-dialog.BcHbARwi.js";import"./uni-popup.CzvQehha.js";import"./fui-loading.PBeNzzTK.js";var M=1;const B=F({components:{fuiSkeleton:S,fuiEmpty:H,fuiTag:L,fuiTabs:C,fuiNavBar:T,fuiBottomPopup:D,contentScroll:I},data(){return{windowHeight:t().windowHeight,contianerHeight:"",tabOption:[],refresherTriggered:!1,_refresherShow:!1,refresherText:this.$t("common.refer"),otype:0,showTp:!1,tpindex:0,tab:0,show:!1,showType:!1,currency:[],currency_id:0,orderList:[],content:"",cids:"",history:{list:[]},selectOptions:[this.$t("list.od_cur"),this.$t("list.od_type"),this.$t("list.all_type")],typeList:[this.$t("list.all_t"),this.$t("trade.lm_od"),this.$t("trade.mk_od")],categoryList:[this.$t("cor.t49"),this.$t("cor.t50"),this.$t("cor.t51"),this.$t("cor.t52"),this.$t("cor.t53"),this.$t("cor.t54")],preloadList:[{left:0,top:0,width:40,height:20,type:"rect"},{left:50,top:0,width:90,height:20,type:"rect"},{left:320,top:0,width:60,height:20,type:"rect"},{left:0,top:35,width:180,height:20,type:"rect"},{left:300,top:70,width:80,height:20,type:"rect"},{left:0,top:70,width:180,height:20,type:"rect"},{left:0,top:105,width:180,height:20,type:"rect"},{left:300,top:105,width:80,height:20,type:"rect"},{left:0,top:140,width:180,height:20,type:"rect"},{left:300,top:140,width:80,height:20,type:"rect"}]}},onLoad(){this.getCurrency(),this.getOrderList(),this.getHistory(),this.setMenu()},onShow(){M=1,this.setMenu()},computed:{...e(["userTheme"])},methods:{loadMore(){M+=1,1===this.tab?this.getHistory():this.getOrderList(),console.log("bottom")},navInit(t){this.contianerHeight=this.windowHeight-t.height-t.statusBarHeight-44},setMenu(){this.tabOption=[this.$t("list.cr_od"),this.$t("list.hs_od")]},navTabChange(t){this.tab=t.index},swiperChange(t){this.tab=t.detail.current},setOtype(t,e){this.otype=e,this.showType=!1,this.selectOptions[1]=t},categoryChange(t,e){this.tpindex=e,this.showTp=!1,this.selectOptions[2]=t},getHistory(){M>1&&this.$refs.loading.open(),z.orderHistory(this.currency_id,M).then((t=>{this.history.list=this.history.list.concat(t.data.list),console.log(this.history),M>1&&this.$refs.loading.close()}))},confirm(){this.docancel()},docancel(){this.$refs.loading.open(),z.orderCancel(this.cids).then((t=>{this.$refs.loading.close(),200===t.code?(this.content=this.$t("trade.suc_wid"),this.$refs.alert.open(),this.getOrderList()):(this.content=t.message,this.$refs.alert.open())})).catch((t=>{console.log(t)}))},cancelOrder(t){this.cids=t,this.content=this.$t("list.inquire_con"),this.$refs.alert.open()},getOrderList(){M>1&&this.$refs.loading.open(),z.tradeOrderList(this.currency_id).then((t=>{200===t.code&&(this.orderList=M>1?this.orderList.concat(t.data):t.data),M>1&&this.$refs.loading.close()}))},setCurrencyId(t){this.currency_id=t,this.show=!1,this.getOrderList()},getCurrency(){this.currency=r("trade-currency")},onRefresh(){this.refresherTriggered=!0,this._refresherShow=!0,this.refresherText="Refreshing",setTimeout((()=>{this.refresherTriggered=!1,this._refresherShow=!1,this.refresherText=this.$t("common.refer")}),1500)},onRestore(){this.refresherTriggered=!1,this._refresherShow=!1}}},[["render",function(t,e,r,z,H,D){const I=v(o("fui-icon"),x),F=v(o("fui-nav-bar"),T),M=v(o("fui-tabs"),C),B=i,Y=w,q=m,E=v(o("fui-tag"),L),N=v(o("fui-skeleton"),S),A=s("content-scroll"),G=k,J=b,K=$,P=v(o("fui-bottom-popup"),O),Q=v(o("alert"),j),X=v(o("loading"),R);return c(),l(B,{class:"trade-list","data-theme":t.userTheme},{default:a((()=>[n(F,{isFixed:"",isOccupy:"",zIndex:"9",background:"var(--background-primary)",color:"var(--content-primary)",title:t.$t("list.page_title"),onLeftClick:e[0]||(e[0]=e=>t.$mroute.back()),onInit:D.navInit},{default:a((()=>[n(I,{name:"arrowleft",size:"56",color:"var(--content-primary)"})])),_:1},8,["title","onInit"]),n(B,{class:"list-tabs"},{default:a((()=>[n(M,{isSlider:!1,alignLeft:!0,current:H.tab,padding:0,scale:1,height:88,size:28,selectedSize:28,short:!1,background:"var(--background-primary)",color:"var(--content-tertiary)",selectedColor:"var(--content-primary)",tabs:H.tabOption,onChange:D.navTabChange},null,8,["current","tabs","onChange"])])),_:1}),n(J,{class:"list-swiper",duration:300,current:H.tab,style:g(`height: ${H.contianerHeight}px`),onChange:D.swiperChange},{default:a((()=>[n(G,{class:"list-swiper-item"},{default:a((()=>[d("",!0),n(A,{scrollY:!0,refresher:!0,lowerThreshold:50,refresherThreshold:45,empty:0==H.refresherTriggered&&0==H.orderList.length,class:"scroll-view",onRefresherrefresh:D.onRefresh,onRestore:D.onRestore,onScrolltolower:D.loadMore},{default:a((()=>[n(B,{class:"list-content"},{default:a((()=>[(c(!0),f(u,null,h(H.orderList,((e,r)=>(c(),l(B,{class:"card-item",key:"t"+r},{default:a((()=>[n(B,{class:"row"},{default:a((()=>[n(B,{class:"row-left"},{default:a((()=>[1==e.direction?(c(),l(E,{key:0,padding:["6rpx","10rpx"],radius:4,text:t.$t("trade.buy_on"),marginRight:10,size:"22",background:"var(--color-primary)",color:"var(--content-always-white)"},null,8,["text"])):d("",!0),2==e.direction?(c(),l(E,{key:1,padding:["6rpx","10rpx"],radius:4,text:t.$t("trade.sell_on"),marginRight:10,size:"22",background:"var(--content-trade-sell)",color:"var(--content-always-white)"},null,8,["text"])):d("",!0),n(Y,{class:"font-14 font-weight color-black"},{default:a((()=>[_(y(e.symbol)+"/USDT ",1)])),_:2},1024)])),_:2},1024),n(B,{class:"row-right"},{default:a((()=>[n(Y,{class:"font-12 font-weight color-primary",onClick:t=>D.cancelOrder(e.id)},{default:a((()=>[_(y(t.$t("trade.wd_order")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024),n(B,{class:"row"},{default:a((()=>[n(B,{class:"row-left"},{default:a((()=>[n(Y,{class:"font-12 color-gray"},{default:a((()=>[_(y(e.created_at),1)])),_:2},1024),n(E,{padding:["6rpx","10rpx"],radius:4,text:1==e.order_type?this.$t("trade.mk_od"):this.$t("trade.lm_od"),marginLeft:10,size:"22",background:"var(--background-secondary)",color:"var(--content-tertiary)"},null,8,["text"])])),_:2},1024)])),_:2},1024),n(B,{class:"row"},{default:a((()=>[n(B,{class:"row-left"},{default:a((()=>[n(Y,{class:"font-12 color-gray"},{default:a((()=>[_(y(t.$t("kline.price"))+"(USDT) ",1)])),_:1})])),_:1}),n(B,{class:"row-right"},{default:a((()=>[n(Y,{class:"font-12 color-black font-weight"},{default:a((()=>[_(y(t.$util.float(e.price)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),n(B,{class:"row"},{default:a((()=>[n(B,{class:"row-left"},{default:a((()=>[2==e.direction?(c(),l(Y,{key:0,class:"font-12 color-gray"},{default:a((()=>[_(y(t.$t("kline.num"))+"("+y(e.symbol)+") ",1)])),_:2},1024)):(c(),l(Y,{key:1,class:"font-12 color-gray"},{default:a((()=>[_(y(t.$t("trade.vl_tan"))+"(USDT) ",1)])),_:1}))])),_:2},1024),n(B,{class:"row-right"},{default:a((()=>[2==e.direction?(c(),l(Y,{key:0,class:"font-12 color-black font-weight"},{default:a((()=>[_(y(t.$util.float(e.amount)),1)])),_:2},1024)):(c(),l(Y,{key:1,class:"font-12 color-black font-weight"},{default:a((()=>[_(y(t.$util.float(e.amount,2)),1)])),_:2},1024))])),_:2},1024)])),_:2},1024),1==e.direction?(c(),l(B,{key:0,class:"row"},{default:a((()=>[n(B,{class:"row-left"},{default:a((()=>[n(Y,{class:"font-12 color-gray"},{default:a((()=>[_(y(t.$t("trade.ex_tran"))+"("+y(e.symbol)+") ",1)])),_:2},1024)])),_:2},1024),n(B,{class:"row-right"},{default:a((()=>[n(Y,{class:"font-12 color-black font-weight"},{default:a((()=>[_(y(t.$util.float(e.amount/e.price,e.decimals)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)):d("",!0),n(B,{class:"row"},{default:a((()=>[n(B,{class:"row-left"},{default:a((()=>[n(Y,{class:"font-12 color-gray"},{default:a((()=>[_(y(t.$t("trade.traded")),1)])),_:1})])),_:1}),n(B,{class:"row-right"},{default:a((()=>[n(Y,{class:"font-12 color-black font-weight"},{default:a((()=>[_(" -- ")])),_:1})])),_:1})])),_:1})])),_:2},1024)))),128)),n(B,{class:p(["skeleton-warp",H.refresherTriggered?"skeleton-show":"skeleton-hide"])},{default:a((()=>[n(B,{class:"skeleton-box"},{default:a((()=>[n(N,{outerClass:"skeleton-box",theme:t.userTheme,preloadList:H.preloadList},null,8,["theme","preloadList"])])),_:1})])),_:1},8,["class"])])),_:1})])),_:1},8,["empty","onRefresherrefresh","onRestore","onScrolltolower"])])),_:1}),n(G,{class:"list-swiper-item"},{default:a((()=>[d("",!0),n(A,{scrollY:!0,refresher:!0,lowerThreshold:50,refresherThreshold:45,empty:0==H.refresherTriggered&&0==H.history.list.length,class:"scroll-view",onRefresherrefresh:D.onRefresh,onRestore:D.onRestore,onScrolltolower:D.loadMore},{default:a((()=>[n(B,{class:"list-content"},{default:a((()=>[H.refresherTriggered?d("",!0):(c(!0),f(u,{key:0},h(H.history.list,((e,r)=>(c(),l(B,{class:"card-item",key:"h"+r},{default:a((()=>[n(B,{class:"row"},{default:a((()=>[n(B,{class:"row-left"},{default:a((()=>[1==e.direction?(c(),l(E,{key:0,padding:["6rpx","10rpx"],radius:4,text:t.$t("trade.buy_on"),marginRight:10,size:"22",background:"var(--color-primary)",color:"var(--content-always-white)"},null,8,["text"])):d("",!0),2==e.direction?(c(),l(E,{key:1,padding:["6rpx","10rpx"],radius:4,text:t.$t("trade.sell_on"),marginRight:10,size:"22",background:"var(--content-trade-sell)",color:"var(--content-always-white)"},null,8,["text"])):d("",!0),n(Y,{class:"font-14 font-weight color-black"},{default:a((()=>[_(y(e.symbol)+"/USDT ",1)])),_:2},1024)])),_:2},1024),n(B,{class:"row-right"},{default:a((()=>[3==e.status?(c(),l(Y,{key:0,class:"font-12 font-weight color-gray"},{default:a((()=>[_(y(t.$t("list.wd")),1)])),_:1})):d("",!0),1==e.status?(c(),l(Y,{key:1,class:"font-12 font-weight color-primary"},{default:a((()=>[_(y(t.$t("list.cltd")),1)])),_:1})):d("",!0)])),_:2},1024)])),_:2},1024),n(B,{class:"row"},{default:a((()=>[n(B,{class:"row-left"},{default:a((()=>[n(Y,{class:"font-12 color-gray"},{default:a((()=>[_(y(e.created_at),1)])),_:2},1024),n(E,{padding:["6rpx","10rpx"],radius:4,text:1==e.order_type?t.$t("trade.mk_od"):t.$t("trade.lm_od"),marginLeft:10,size:"22",background:"var(--background-secondary)",color:"var(--content-tertiary)"},null,8,["text"])])),_:2},1024)])),_:2},1024),n(B,{class:"row"},{default:a((()=>[n(B,{class:"row-left"},{default:a((()=>[2==e.direction?(c(),l(Y,{key:0,class:"font-12 color-gray"},{default:a((()=>[_(y(t.$t("kline.num"))+"("+y(e.symbol)+") ",1)])),_:2},1024)):(c(),l(Y,{key:1,class:"font-12 color-gray"},{default:a((()=>[_(y(t.$t("trade.vl_tan"))+"(USDT) ",1)])),_:1}))])),_:2},1024),n(B,{class:"row-right"},{default:a((()=>[2==e.direction?(c(),l(Y,{key:0,class:"font-12 color-black font-weight"},{default:a((()=>[_(y(t.$util.float(e.amount)),1)])),_:2},1024)):(c(),l(Y,{key:1,class:"font-12 color-black font-weight"},{default:a((()=>[_(y(t.$util.float(e.amount,2)),1)])),_:2},1024))])),_:2},1024)])),_:2},1024),1==e.direction?(c(),l(B,{key:0,class:"row"},{default:a((()=>[n(B,{class:"row-left"},{default:a((()=>[n(Y,{class:"font-12 color-gray"},{default:a((()=>[_(y(t.$t("kline.num"))+"("+y(e.symbol)+") ",1)])),_:2},1024)])),_:2},1024),n(B,{class:"row-right"},{default:a((()=>[n(Y,{class:"font-12 color-black font-weight"},{default:a((()=>[_(y(t.$util.thousandSeparator(e.amount/e.price,8)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)):d("",!0),n(B,{class:"row"},{default:a((()=>[n(B,{class:"row-left"},{default:a((()=>[n(Y,{class:"font-12 color-gray"},{default:a((()=>[_(y(t.$t("trade.traded")),1)])),_:1})])),_:1}),n(B,{class:"row-right"},{default:a((()=>[n(Y,{class:"font-12 color-black font-weight"},{default:a((()=>[_(y(t.$util.float(e.t_amount))+" "+y(1===e.direction?e.symbol:"USDT"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),n(B,{class:"row"},{default:a((()=>[n(B,{class:"row-left"},{default:a((()=>[n(Y,{class:"font-12 color-gray"},{default:a((()=>[_(y(t.$t("cor.t31")),1)])),_:1})])),_:1}),n(B,{class:"row-right"},{default:a((()=>[n(Y,{class:"font-12 color-black font-weight"},{default:a((()=>[_(y(t.$util.float(e.charge))+" "+y(1===e.direction?e.symbol:"USDT"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),n(B,{class:"row"},{default:a((()=>[n(B,{class:"row-left"},{default:a((()=>[n(Y,{class:"font-12 color-gray"},{default:a((()=>[_(y(t.$t("list.at_price")),1)])),_:1})])),_:1}),n(B,{class:"row-right"},{default:a((()=>[n(Y,{class:"font-12 color-black font-weight"},{default:a((()=>[_(y(t.$util.float(e.t_price?e.t_price:0))+" "+y(1===e.direction?"USDT":e.symbol),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),n(B,{class:p(["skeleton-warp",H.refresherTriggered?"skeleton-show":"skeleton-hide"])},{default:a((()=>[n(B,{class:"skeleton-box"},{default:a((()=>[n(N,{outerClass:"skeleton-box",theme:t.userTheme,preloadList:H.preloadList},null,8,["theme","preloadList"])])),_:1})])),_:1},8,["class"])])),_:1})])),_:1},8,["empty","onRefresherrefresh","onRestore","onScrolltolower"])])),_:1})])),_:1},8,["current","style","onChange"]),n(P,{show:H.show,radius:16,background:"var(--background-primary)"},{default:a((()=>[n(B,{class:"popup-wrap"},{default:a((()=>[n(B,{class:"popup-title"},{default:a((()=>[n(Y,{class:"font-16 color-black font-weight"},{default:a((()=>[_(y(t.$t("list.select_cur")),1)])),_:1}),n(I,{class:"close-icon",name:"close",size:48,color:"var(--content-primary)",onClick:e[7]||(e[7]=t=>H.show=!1)})])),_:1}),n(K,{"scroll-y":"",class:"popup-scroll-view",style:g(`height: ${H.contianerHeight-150}px`)},{default:a((()=>[n(B,{class:"cell",onClick:e[8]||(e[8]=e=>{D.setCurrencyId(0),H.selectOptions[0]=t.$t("list.all_t")})},{default:a((()=>[n(Y,{class:p(["font-13 color-black",{"color-primary font-weight":0==H.currency_id}])},{default:a((()=>[_(y(t.$t("list.all_t")),1)])),_:1},8,["class"]),0==H.currency_id?(c(),l(q,{key:0,src:U,mode:"widthFix"})):d("",!0)])),_:1}),(c(!0),f(u,null,h(H.currency[0].currency,((t,e)=>(c(),l(B,{class:"cell",onClick:e=>{D.setCurrencyId(t.id),H.selectOptions[0]=t.symbol},key:e},{default:a((()=>[n(Y,{class:p(["font-13 color-black",{"color-primary font-weight":H.currency_id==t.id}])},{default:a((()=>[_(y(t.symbol)+"/USDT ",1)])),_:2},1032,["class"]),H.currency_id==t.id?(c(),l(q,{key:0,src:U,mode:"widthFix"})):d("",!0)])),_:2},1032,["onClick"])))),128))])),_:1},8,["style"])])),_:1})])),_:1},8,["show"]),n(P,{show:H.showType,radius:16,background:"var(--background-primary)"},{default:a((()=>[n(B,{class:"popup-wrap",type:"min-wrap"},{default:a((()=>[n(B,{class:"popup-title"},{default:a((()=>[n(Y,{class:"font-16 color-black font-weight"},{default:a((()=>[_(y(t.$t("list.select_odtype")),1)])),_:1}),n(I,{class:"close-icon",name:"close",size:48,color:"var(--content-primary)",onClick:e[9]||(e[9]=t=>H.showType=!1)})])),_:1}),n(K,{"scroll-y":"",class:"popup-scroll-view"},{default:a((()=>[(c(!0),f(u,null,h(H.typeList,((t,e)=>(c(),l(B,{class:p(["cell",{active:H.otype==e}]),key:e,onClick:r=>D.setOtype(t,e)},{default:a((()=>[n(Y,{class:p(["font-13 color-black",{"color-primary font-weight":H.otype==e}])},{default:a((()=>[_(y(t),1)])),_:2},1032,["class"]),H.otype==e?(c(),l(q,{key:0,src:U,mode:"widthFix"})):d("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1},8,["show"]),n(P,{show:H.showTp,radius:16,background:"var(--background-primary)"},{default:a((()=>[n(B,{class:"popup-wrap",type:"tp-wrap"},{default:a((()=>[n(B,{class:"popup-title"},{default:a((()=>[n(Y,{class:"font-16 color-black font-weight"},{default:a((()=>[_(y(t.$t("cor.t48")),1)])),_:1}),n(I,{class:"close-icon",name:"close",size:48,color:"var(--content-primary)",onClick:e[10]||(e[10]=t=>H.showTp=!1)})])),_:1}),n(K,{"scroll-y":"",class:"popup-scroll-view"},{default:a((()=>[(c(!0),f(u,null,h(H.categoryList,((t,e)=>(c(),l(B,{class:p(["cell",{active:H.tpindex==e}]),key:e,onClick:r=>D.categoryChange(t,e)},{default:a((()=>[n(Y,{class:p(["font-13 color-black",{"color-primary font-weight":H.tpindex==e}])},{default:a((()=>[_(y(t),1)])),_:2},1032,["class"]),H.tpindex==e?(c(),l(q,{key:0,src:U,mode:"widthFix"})):d("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1},8,["show"]),n(Q,{ref:"alert",title:this.$t("login.tip_t2"),ctxt:this.$t("login.cancel"),ftxt:this.$t("login.confirm"),onConfirm:D.confirm,content:H.content},null,8,["title","ctxt","ftxt","onConfirm","content"]),n(X,{ref:"loading"},null,512)])),_:1},8,["data-theme"])}],["__scopeId","data-v-dc70fede"]]);export{B as default};
