import{l as t,a as i,b8 as a,b9 as s,bd as e,i as o,q as n,t as m,w as r,u,v as l,x as c,y as d,z as g,A as h,H as p,G as f}from"./index-DJtkXLbk.js";import{_ as x}from"./fui-icon.Di2eQoC1.js";import{r as b}from"./uni-app.es.DnKBEGT2.js";import{_ as $}from"./fui-nav-bar.jzMwm7nO.js";import{_ as w}from"./fui-button.Bz1nWTaC.js";import{_}from"./alert.Dea_H56C.js";import{u as y}from"./user.Bg4aheva.js";import{_ as v}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-popup-dialog.BcHbARwi.js";import"./uni-popup.CzvQehha.js";var k;const j=v({data(){return{img:[{},{title:this.$t("auths.t26"),title2:this.$t("auths.t27"),imgnumshow:!0,imgnum:"/static/img/cardnumw.png",imgimgshow:!0,imgimg:"/static/img/cardimgw.png"},{title:this.$t("auths.t28"),imgnumshow:!0,imgnum:"/static/img/huzhaow.png",imgimgshow:!1},{title:this.$t("auths.t29"),imgnumshow:!0,imgnum:"/static/img/carimgw.png",imgimgshow:!1},{title:this.$t("auths.t30"),imgnumshow:!0,imgnum:"/static/img/imgw.png",imgimgshow:!1}],index:3,title:this.$t("login.tip_t2"),content:"",ctxt:this.$t("取消")}},onLoad(i){i.index&&(this.index=parseInt(i.index)),k=t("authInfo")},onShow(){this.getInfo()},computed:{...i(["userTheme"])},methods:{submit(){if(!k.img1||void 0===k.img1)return this.content=this.$t("auths.t31"),this.$refs.alert.open(),!1;a(),y.submitAuthInfo(k).then((t=>{s(),200!=t.code?(this.content=t.message,this.$refs.alert.open()):this.$mroute.authing()})).catch((t=>{this.content=this.$t("auths.t32"),this.$refs.alert.open(),s()}))},getInfo(){y.baseAuthInfo().then((t=>{void 0!==t.data.id&&t.data.id&&(this.cardType=t.data.type,this.img[this.cardType].imgnum=t.data.img1,this.img[this.cardType].imgimg=t.data.img2,this.$forceUpdate())}))},upload(t){var i=this;e({count:1,sizeType:["compressed"],success(e){a({title:"uploading"}),console.log(e),o.uploadFile(e.tempFilePaths[0]).then((a=>{s(),200!=(a=JSON.parse(a.data)).code&&(this.content=a.message,this.$refs.alert.open()),1==t?(i.img[i.index].imgnum=a.data.url,k.img1=a.data.url):(k.img2=a.data.url,i.img[i.index].imgimg=a.data.url)})).catch((t=>{s(),i.content=this.$t("auths.t32"),i.$refs.alert.open()}))}})}}},[["render",function(t,i,a,s,e,o){const y=b(n("fui-icon"),x),v=b(n("fui-nav-bar"),$),k=p,j=f,I=u,z=b(n("fui-button"),w),T=b(n("alert"),_);return l(),m(I,{class:"baseAuth","data-theme":t.userTheme},{default:r((()=>[c(v,{statusBar:"",isFixed:"",isOccupy:"",zIndex:"9",title:t.$t("auths.t21"),color:"var(--content-primary)",background:"var(--background-primary)",onLeftClick:i[0]||(i[0]=i=>t.$mroute.back())},{default:r((()=>[c(y,{name:"arrowleft",size:"56",color:"var(--content-primary)"})])),_:1},8,["title"]),c(I,{class:"baseAuth-container"},{default:r((()=>[c(I,{class:"upload-label"},{default:r((()=>[c(k,{class:"font-14 color-black font-weight"},{default:r((()=>[d(g(e.img[e.index].title),1)])),_:1}),c(j,{class:"upload-image",src:e.img[e.index].imgnum,onClick:i[1]||(i[1]=t=>o.upload(1)),mode:"widthFix"},null,8,["src"])])),_:1}),e.img[e.index].imgimgshow?(l(),m(I,{key:0,class:"upload-label"},{default:r((()=>[c(k,{class:"font-14 color-black font-weight"},{default:r((()=>[d(g(e.img[e.index].title2),1)])),_:1}),c(j,{class:"upload-image",src:e.img[e.index].imgimg,onClick:i[2]||(i[2]=t=>o.upload(2)),mode:"widthFix"},null,8,["src"])])),_:1})):h("",!0),c(I,{class:"upload-tips"},{default:r((()=>[c(k,{class:"font-13 color-black font-weight"},{default:r((()=>[d(g(t.$t("auths.t22")),1)])),_:1}),c(k,{class:"font-13 color-gray mt-10"},{default:r((()=>[d(g(t.$t("auths.t23")),1)])),_:1}),c(k,{class:"font-13 color-gray mt-5"},{default:r((()=>[d(g(t.$t("auths.t24")),1)])),_:1})])),_:1})])),_:1}),c(I,{class:"footer-button"},{default:r((()=>[c(z,{background:"var(--content-primary)",color:"var(--background-primary)",size:"26",radius:"78rpx",height:"78rpx",text:t.$t("auths.t25"),onClick:i[3]||(i[3]=t=>o.submit())},null,8,["text"])])),_:1}),c(T,{ref:"alert",title:e.title,content:e.content,ctxt:e.ctxt},null,8,["title","content","ctxt"])])),_:1},8,["data-theme"])}],["__scopeId","data-v-ce07f2cc"]]);export{j as default};
