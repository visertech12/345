import{v as t,t as e,w as o,D as i,y as s,z as n,A as r,x as l,B as u,C as a,F as d,E as h,H as c,u as m}from"./index-DJtkXLbk.js";import{_ as f}from"./_plugin-vue_export-helper.BCo6x5W8.js";const p=f({name:"fui-count-down",emits:["end","time"],props:{width:{type:[Number,String],default:40},height:{type:[Number,String],default:40},borderColor:{type:String,default:"#333"},background:{type:String,default:"#fff"},size:{type:[Number,String],default:28},color:{type:String,default:"#333"},colonSize:{type:[Number,String],default:28},colonColor:{type:String,default:"#333"},value:{type:[Number,String],default:0},isDays:{type:Boolean,default:!1},isHours:{type:Boolean,default:!0},isMinutes:{type:Boolean,default:!0},isSeconds:{type:Boolean,default:!0},unitEn:{type:Boolean,default:!1},isMs:{type:Boolean,default:!1},msWidth:{type:[Number,String],default:36},msSize:{type:[Number,String],default:24},msColor:{type:String,default:""},isColon:{type:Boolean,default:!0},returnTime:{type:Boolean,default:!1},autoStart:{type:Boolean,default:!0}},watch:{value(t){this.clearTimer(),this.time=Number(t)||0,this.countDown(this.time),this.returnTime&&this.$emit("time",{seconds:this.time}),setTimeout((()=>{this.autoStart&&this.startCountdown()}),0)}},data:()=>({countdown:null,d:"0",h:"00",i:"00",s:"00",ms:[0,1,2,3,4,5,6,7,8,9],ani:!1,percent:0,time:0}),mounted(){this.clearTimer(),this.time=Number(this.value)||0,this.countDown(this.time),this.time>0&&this.autoStart&&(this.returnTime&&this.$emit("time",{seconds:this.time}),this.startCountdown())},beforeUnmount(){this.clearTimer()},methods:{getWidth:function(t,e){t=Number(t);let o=Math.ceil(t>99?e/2*t.toString().length:e);return o=o%2==0?o:o+1,o},clearTimer(){this.ani=!1,clearInterval(this.countdown),this.countdown=null},endCountdown(t=!1){this.clearTimer(),t||this.$emit("end",{})},startCountdown:function(){this.clearTimer(),this.time<=0?this.endCountdown():(this.ani=!0,this.countdown=setInterval((()=>{this.time--,this.countDown(this.time),this.returnTime&&this.$emit("time",{seconds:this.time}),this.time<=0&&this.endCountdown()}),1e3))},resetCountdown(t=0){this.time=t||Number(this.value),this.clearTimer(),this.countDown(this.time),this.returnTime&&this.$emit("time",{seconds:this.time}),this.autoStart&&this.startCountdown()},countDown(t){let[e,o,i,s]=[0,0,0,0];t>0&&(e=this.isDays?Math.floor(t/86400):0,o=this.isHours?Math.floor(t/3600)-24*e:0,i=this.isMinutes?Math.floor(t/60)-60*o-24*e*60:0,s=Math.floor(t)-24*e*60*60-60*o*60-60*i),o=o<10?"0"+o:o,i=i<10?"0"+i:i,s=s<10?"0"+s:s,this.d=e,this.h=o,this.i=i,this.s=s}}},[["render",function(f,p,y,g,_,w){const S=c,b=m;return t(),e(b,{class:"fui-count__down-wrap"},{default:o((()=>[y.isDays?(t(),e(S,{key:0,class:"fui-count__down-item",style:i({background:y.background,borderColor:y.borderColor,width:w.getWidth(_.d,y.width)+"rpx",height:y.height+"rpx",fontSize:y.size+"rpx",color:y.color})},{default:o((()=>[s(n(_.d),1)])),_:1},8,["style"])):r("",!0),y.isDays?(t(),e(S,{key:1,class:"fui-count__down-colon",style:i({lineHeight:y.colonSize+"rpx",fontSize:y.colonSize+"rpx",color:y.colonColor})},{default:o((()=>[s(n(y.isColon?":":"天"),1)])),_:1},8,["style"])):r("",!0),y.isHours?(t(),e(S,{key:2,class:"fui-count__down-item",style:i({background:y.background,borderColor:y.borderColor,width:w.getWidth(_.h,y.width)+"rpx",height:y.height+"rpx",fontSize:y.size+"rpx",color:y.color})},{default:o((()=>[s(n(_.h),1)])),_:1},8,["style"])):r("",!0),y.isHours?(t(),e(S,{key:3,class:"fui-count__down-colon",style:i({lineHeight:y.colonSize+"rpx",fontSize:y.colonSize+"rpx",color:y.colonColor})},{default:o((()=>[s(n(y.isColon?":":"时"),1)])),_:1},8,["style"])):r("",!0),y.isMinutes?(t(),e(S,{key:4,class:"fui-count__down-item",style:i({background:y.background,borderColor:y.borderColor,width:w.getWidth(_.i,y.width)+"rpx",height:y.height+"rpx",fontSize:y.size+"rpx",color:y.color})},{default:o((()=>[s(n(_.i),1)])),_:1},8,["style"])):r("",!0),y.isMinutes?(t(),e(S,{key:5,class:"fui-count__down-colon",style:i({lineHeight:y.colonSize+"rpx",fontSize:y.colonSize+"rpx",color:y.colonColor})},{default:o((()=>[s(n(y.isColon?":":"分"),1)])),_:1},8,["style"])):r("",!0),y.isSeconds?(t(),e(S,{key:6,class:"fui-count__down-item",style:i({background:y.background,borderColor:y.borderColor,width:w.getWidth(_.s,y.width)+"rpx",height:y.height+"rpx",fontSize:y.size+"rpx",color:y.color})},{default:o((()=>[s(n(_.s),1)])),_:1},8,["style"])):r("",!0),y.isSeconds&&!y.isColon?(t(),e(S,{key:7,class:"fui-count__down-colon",style:i({lineHeight:y.colonSize+"rpx",fontSize:y.colonSize+"rpx",color:y.colonColor})},{default:o((()=>[s(n(y.unitEn?"s":"秒"),1)])),_:1},8,["style"])):r("",!0),y.isSeconds&&y.isMs&&y.isColon?(t(),e(S,{key:8,class:"fui-count__down-colon",style:i({lineHeight:y.colonSize+"rpx",fontSize:y.colonSize+"rpx",color:y.colonColor})},{default:o((()=>[s(".")])),_:1},8,["style"])):r("",!0),y.isSeconds&&y.isMs?(t(),e(b,{key:9,class:"fui-count__down-ms",style:i({background:y.background,borderColor:y.borderColor,height:y.height+"rpx",width:y.msWidth>0?y.msWidth+"rpx":"auto"})},{default:o((()=>[l(b,{class:h({"fui-count__down-ms_list":_.ani}),ref:"fui_countdown_ms"},{default:o((()=>[(t(!0),u(d,null,a(_.ms,((r,l)=>(t(),e(S,{class:"fui-count__down-ms_item",style:i({height:y.height+"rpx",lineHeight:y.height+"rpx",fontSize:y.msSize+"rpx",color:y.msColor||y.color}),key:l},{default:o((()=>[s(n(r),1)])),_:2},1032,["style"])))),128))])),_:1},8,["class"])])),_:1},8,["style"])):r("",!0)])),_:1})}],["__scopeId","data-v-fbb09114"]]);export{p as _};
