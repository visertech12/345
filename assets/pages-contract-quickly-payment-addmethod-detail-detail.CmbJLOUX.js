import{i as t,a,b9 as e,b8 as l,q as s,t as o,w as u,u as r,v as c,x as i,y as n,z as d,H as p,b5 as h}from"./index-DJtkXLbk.js";import{_ as f}from"./fui-icon.Di2eQoC1.js";import{r as m}from"./uni-app.es.DnKBEGT2.js";import{_ as b}from"./fui-nav-bar.jzMwm7nO.js";import{_ as y}from"./fui-upload.CQzhUcM3.js";import{_ as k}from"./fui-button.Bz1nWTaC.js";import{_}from"./fui-toast.Ddm5uvJW.js";import{u as g}from"./user.Bg4aheva.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const q=x({data:()=>({typeIndex:"",navHeight:"",url:"https://ffa.firstui.cn/api/example/upload-file",status:"",urls:[],account:"",bankNum:"",branchName:"",bankName:"",title:"",name:"",subbranch:"",bank:"",qrcode:""}),onLoad(a){this.typeIndex=a.type,0===parseInt(a.type)&&(this.title=$t("quickly.tt93")),1===parseInt(a.type)&&(this.title=$t("quickly.tt94")),2===parseInt(a.type)&&(this.title=$t("quickly.tt95")),this.url=t.getbaseUrl()},computed:{...a(["userTheme"])},methods:{upload(a){var l=this;return new Promise(((s,o)=>{t.uploadFile(a.path).then((t=>{e(),200!=(t=JSON.parse(t.data)).code&&l.showToast(t.message),s(t.data.url)})).catch((t=>{e(),l.showToast(t.message),o(!1)}))}))},navInit(t){this.navHeight=t.height+t.statusBarHeight},success(t){console.log(t);let a=JSON.parse(t.res.data.replace(/\ufeff/g,"")||"{}");this.status=t.status,a.data.url&&this.$refs.upload.result(a.data.url,t.index)},error(t){this.status=t.status},complete(t){if(this.status=t.status,this.urls=t.urls,"success"===this.status&&"upload"===t.action){if(console.log(this.urls),0==this.typeIndex)var a={name:this.name,type:3,account:this.account,bank:this.bank,qrcode:this.urls[0],subbranch:this.subbranch};else a={name:this.name,account:this.account,type:1==this.typeIndex?2:1,qrcode:this.urls[0]};l(),g.savePayment(a).then((t=>{e(),200===t.code?(this.showToast($t("quickly.tt96"),1500),setTimeout((()=>{this.$mroute.back(2)}),1500)):this.showToast(t.message,1500)})).catch((t=>{e()}))}},confirm(){""===this.account&&this.showToast($t("quickly.tt97"),500),""===this.bankNum&&1==this.typeIndex&&this.showToast($t("quickly.tt98"),500),""===this.subbranch&&1==this.typeIndex&&this.showToast($t("quickly.tt99"),500),""===this.name&&1==this.typeIndex&&this.showToast($t("quickly.tt100"),500),this.$refs.upload.upload(this.upload).then((t=>{console.log(t)}))},showToast(t,a){let e={};e.text=t,e.duration=a,this.$refs.toast.show(e)}}},[["render",function(t,a,e,l,g,x){const q=m(s("fui-icon"),f),$=m(s("fui-nav-bar"),b),v=p,I=r,w=h,V=m(s("fui-upload"),y),T=m(s("fui-button"),k),j=m(s("fui-toast"),_);return c(),o(I,{class:"detail","data-theme":t.userTheme},{default:u((()=>[i($,{statusBar:"",isFixed:"",isOccupy:"",zIndex:"9",title:g.title,background:"var(--background-primary)",color:"var(--content-primary)",onLeftClick:t.$mroute.back,onInit:x.navInit},{default:u((()=>[i(q,{name:"arrowleft",size:"56",color:"var(--content-primary)"})])),_:1},8,["title","onLeftClick","onInit"]),i(I,{class:"detail-container"},{default:u((()=>[i(I,{class:"label"},{default:u((()=>[i(I,{class:"label-title"},{default:u((()=>[i(v,{class:"font-13 color-gray"},{default:u((()=>[n(d(t.$t("quickly.tt83")),1)])),_:1})])),_:1}),i(I,{class:"label-input"},{default:u((()=>[i(w,{type:"text",modelValue:g.name,"onUpdate:modelValue":a[0]||(a[0]=t=>g.name=t),placeholder:t.$t("quickly.tt82"),"placeholder-class":"placeholder"},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),"0"===g.typeIndex?(c(),o(I,{key:0},{default:u((()=>[i(I,{class:"label"},{default:u((()=>[i(I,{class:"label-title"},{default:u((()=>[i(v,{class:"font-13 color-gray"},{default:u((()=>[n(d(t.$t("quickly.tt84")),1)])),_:1})])),_:1}),i(I,{class:"label-input"},{default:u((()=>[i(w,{type:"text",modelValue:g.bank,"onUpdate:modelValue":a[1]||(a[1]=t=>g.bank=t),placeholder:t.$t("quickly.tt86"),"placeholder-class":"placeholder"},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),i(I,{class:"label"},{default:u((()=>[i(I,{class:"label-title"},{default:u((()=>[i(v,{class:"font-13 color-gray"},{default:u((()=>[n(d(t.$t("quickly.tt85")),1)])),_:1})])),_:1}),i(I,{class:"label-input"},{default:u((()=>[i(w,{type:"number",modelValue:g.account,"onUpdate:modelValue":a[2]||(a[2]=t=>g.account=t),placeholder:t.$t("quickly.tt87"),"placeholder-class":"placeholder"},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),i(I,{class:"label"},{default:u((()=>[i(I,{class:"label-title"},{default:u((()=>[i(v,{class:"font-13 color-gray"},{default:u((()=>[n(d(t.$t("quickly.tt89")),1)])),_:1})])),_:1}),i(I,{class:"label-input"},{default:u((()=>[i(w,{type:"text",modelValue:g.subbranch,"onUpdate:modelValue":a[3]||(a[3]=t=>g.subbranch=t),placeholder:t.$t("quickly.tt88"),"placeholder-class":"placeholder"},null,8,["modelValue","placeholder"])])),_:1})])),_:1})])),_:1})):(c(),o(I,{key:1},{default:u((()=>[i(I,{class:"label"},{default:u((()=>[i(I,{class:"label-title"},{default:u((()=>[i(v,{class:"font-13 color-black"},{default:u((()=>[n(d(t.$t("quickly.tt90")),1)])),_:1})])),_:1}),i(I,{class:"label-input"},{default:u((()=>[i(w,{type:"text",modelValue:g.account,"onUpdate:modelValue":a[4]||(a[4]=t=>g.account=t),placeholder:t.$t("quickly.tt91"),"placeholder-class":"placeholder"},null,8,["modelValue","placeholder"])])),_:1})])),_:1})])),_:1})),i(I,{class:"label"},{default:u((()=>[i(I,{class:"label-title"},{default:u((()=>[i(v,{class:"font-13 color-gray"},{default:u((()=>[n(d(t.$t("quickly.tt92")),1)])),_:1})])),_:1}),i(I,{class:"label-upload"},{default:u((()=>[i(V,{immediate:!1,max:"1",width:"200",height:"200",addSize:"66",background:"var(--background-secondary)",addColor:"var(--content-tertiary)",radius:"8",borderSytle:"dashed",borderColor:"var(--border-strength-100)",url:g.url,ref:"upload",callUpload:!0,onSuccess:x.upload,onError:x.error,onComplete:x.complete},null,8,["url","onSuccess","onError","onComplete"])])),_:1})])),_:1})])),_:1}),i(I,{class:"footer-button"},{default:u((()=>[i(T,{height:"88rpx",size:26,radius:"88rpx",color:"var(--background-primary)",background:"var(--content-primary)",onClick:x.confirm},{default:u((()=>[n(d(t.$t("quickly.tt69")),1)])),_:1},8,["onClick"])])),_:1}),i(j,{padding:["20rpx","20rpx"],size:"26",color:"var(--content-always-white)",background:"rgba(0,0,0,.7)",ref:"toast"},null,512)])),_:1},8,["data-theme"])}],["__scopeId","data-v-950c2e66"]]);export{q as default};
