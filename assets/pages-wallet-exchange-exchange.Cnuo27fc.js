import{_ as t}from"./fui-icon.Di2eQoC1.js";import{I as e,a as n,i as a,q as c,t as i,w as s,u as o,v as l,x as r,y as u,z as f,E as d,B as h,C as m,F as g,D as p,G as x,H as _,b5 as $,J as b}from"./index-DJtkXLbk.js";import{r as y}from"./uni-app.es.DnKBEGT2.js";import{_ as k}from"./fui-nav-bar.jzMwm7nO.js";import{_ as w}from"./uni-popup.CzvQehha.js";import{_ as v}from"./coin-indexed-xlist.MFkcItu4.js";import{_ as C}from"./loading.4tTz4-j4.js";import{_ as j}from"./alert.Dea_H56C.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{N as F}from"./index.BDukOuvF.js";import"./fui-loading.PBeNzzTK.js";import"./uni-popup-dialog.BcHbARwi.js";const H=I({components:{[F.name]:F,[e.name]:e,fuiNavBar:k},data:()=>({direction:0,coin:[],current:!1,amount:"",accounts:[],findex:0,tindex:1,content:"",navHeight:""}),computed:{...n(["userTheme"])},onReady(){this.getCurrency()},onShow(){this.accounts=[{text:this.$t("wallete.capital_acc"),field:"balance"},{text:this.$t("wallete.spot_acc"),field:"trade_balance"},{text:this.$t("wallete.contract_acc"),field:"contract_balance"},{text:this.$t("wallete.options_acc"),field:"future_balance"},{text:this.$t("wallete.fin_acc"),field:"finance_balance"}]},methods:{openSelect(){if(2==this.findex||2==this.tindex){const t=this.coin.filter((t=>"USDT"===t.symbol));this.coin=t,this.$refs.selectp.open()}else this.getCurrency(),this.$refs.selectp.open()},navInit(t){this.navHeight=t.height+t.statusBarHeight},confirm(){if(""==this.amount||parseFloat(this.amount)<=0)return!1;if(!1===this.current)return!1;if(parseFloat(this.amount)>parseFloat(this.current[this.accounts[this.findex].field]))return this.content=this.$t("financing.t97"),this.$refs.alert.open(),!1;const t={currency_id:this.current.id,amount:this.amount,to:this.accounts[this.tindex].field,from:this.accounts[this.findex].field};this.$refs.loading.open(),a.postExchange(t).then((t=>{if(this.$refs.loading.close(),200!=t.code)return this.content=t.message,this.$refs.alert.open(),!1;this.current[this.accounts[this.findex].field]=this.current[this.accounts[this.findex].field]-this.amount,this.content=this.$t("financing.t98"),this.$refs.alert.open(),this.getCurrency()})).catch((t=>{this.$refs.loading.close()}))},exchange(){var t=this.findex;this.findex=this.tindex,this.tindex=t},setAccount(t){0==this.direction&&this.tindex!=t&&(this.findex=t,this.$refs.accounts.close()),1==this.direction&&this.findex!=t&&(this.tindex=t,this.$refs.accounts.close())},getCurrency(){a.getAccountCurrency().then((t=>{this.coin=t.data,console.log(this.coin)}))},itemclick(t){this.current=t,this.amount="",this.$refs.selectp.close(),this.getCurrency()}}},[["render",function(e,n,a,I,F,H){const T=y(c("fui-icon"),t),z=x,S=y(c("fui-nav-bar"),k),A=_,B=o,L=$,N=b,O=y(c("uni-popup"),w),R=y(c("coin-indexed-xlist"),v),V=y(c("loading"),C),D=y(c("alert"),j);return l(),i(B,{class:"exchange","data-theme":e.userTheme},{default:s((()=>[r(S,{zIndex:"1",isFixed:"",isOccupy:"",padding:15,background:"var(--background-primary)",color:"var(--content-primary)",title:e.$t("financing.t81"),onLeftClick:n[0]||(n[0]=t=>e.$mroute.back()),onRightClick:n[1]||(n[1]=t=>e.$mroute.rechargeRecord())},{right:s((()=>[r(z,{class:"order-image",src:`/static/img/tactic/order-${e.userTheme}.png`,mode:"widthFix"},null,8,["src"])])),default:s((()=>[r(T,{name:"arrowleft",size:"56",color:"var(--content-primary)"})])),_:1},8,["title"]),r(B,{class:"exchange-container-wrap"},{default:s((()=>[r(B,{class:"_exchange_box"},{default:s((()=>[r(B,{class:"ex-left"},{default:s((()=>[r(A,{class:"font-14 color-gray"},{default:s((()=>[u(f(e.$t("financing.t82")),1)])),_:1}),r(A,{class:"font-14 color-gray"},{default:s((()=>[u(f(e.$t("financing.t83")),1)])),_:1})])),_:1}),r(B,{class:"ex-center"},{default:s((()=>[r(B,{class:"cell",onClick:n[2]||(n[2]=t=>{F.direction=0,e.$refs.accounts.open()})},{default:s((()=>[r(A,{class:"font-14 color-black font-weight"},{default:s((()=>[u(f(F.accounts[F.findex].text),1)])),_:1}),r(z,{class:"down-icon",src:`/static/img/tactic/down-${e.userTheme}.png`,mode:"widthFix"},null,8,["src"])])),_:1}),r(B,{class:"cell",onClick:n[3]||(n[3]=t=>{F.direction=1,e.$refs.accounts.open()})},{default:s((()=>[r(A,{class:"font-14 color-black font-weight"},{default:s((()=>[u(f(F.accounts[F.tindex].text),1)])),_:1}),r(z,{class:"down-icon",src:`/static/img/tactic/down-${e.userTheme}.png`,mode:"widthFix"},null,8,["src"])])),_:1})])),_:1}),r(B,{class:"ex-right"},{default:s((()=>[r(B,{class:"switch-box",onClick:H.exchange},{default:s((()=>[r(z,{class:"icon",src:`/static/wallet/exchange-${e.userTheme}.png`},null,8,["src"])])),_:1},8,["onClick"])])),_:1})])),_:1}),r(B,{class:"row-box"},{default:s((()=>[r(B,{class:"_title"},{default:s((()=>[r(A,{class:"font-13 color-black"},{default:s((()=>[u(f(e.$t("financing.t84")),1)])),_:1})])),_:1}),r(B,{class:"cell-input-box",onClick:n[4]||(n[4]=t=>H.openSelect())},{default:s((()=>[!1===F.current?(l(),i(A,{key:0,class:"font-13 color-gray"},{default:s((()=>[u(f(e.$t("financing.t85")),1)])),_:1})):(l(),i(B,{key:1,class:"coin-box"},{default:s((()=>[r(z,{src:F.current.icon,mode:""},null,8,["src"]),r(A,{class:"font-13 font-weight color-black"},{default:s((()=>[u(f(F.current.symbol),1)])),_:1})])),_:1})),r(z,{class:"down-icon",src:`/static/img/tactic/down-${e.userTheme}.png`,mode:"widthFix"},null,8,["src"])])),_:1})])),_:1}),r(B,{class:"row-box"},{default:s((()=>[r(B,{class:"_title"},{default:s((()=>[r(A,{class:"font-13 color-black"},{default:s((()=>[u(f(e.$t("financing.t86")),1)])),_:1}),r(A,{class:"font-13 color-black"},{default:s((()=>[u(f(e.$t("financing.t87"))+" "+f(!1===F.current?"--":e.$util.thousandSeparator(e.$util.str2number(F.current[F.accounts[F.findex].field])))+" "+f(F.current.symbol),1)])),_:1})])),_:1}),r(B,{class:"cell-input-box"},{default:s((()=>[r(L,{modelValue:F.amount,"onUpdate:modelValue":n[5]||(n[5]=t=>F.amount=t),type:"number",class:"color-black font-13",placeholder:e.$t("financing.t88"),"placeholder-class":"placeholder"},null,8,["modelValue","placeholder"]),r(A,{onClick:n[6]||(n[6]=t=>F.amount=e.$util.str2number(F.current[F.accounts[F.findex].field])),class:"font-13 color-primary desc"},{default:s((()=>[u(f(e.$t("financing.t89")),1)])),_:1})])),_:1})])),_:1}),r(B,{class:"tips"},{default:s((()=>[r(A,{class:"font-14 color-black"},{default:s((()=>[u(f(e.$t("financing.t90")),1)])),_:1}),r(A,{class:"font-12 color-gray"},{default:s((()=>[u(f(e.$t("financing.t91")),1)])),_:1})])),_:1}),r(B,{class:"footer"},{default:s((()=>[r(N,{onClick:H.confirm,class:d([{"bg-black":""!=F.amount,"bg-gray":""==F.amount||F.amount<=0},"button"])},{default:s((()=>[r(A,{class:d(["font-13 font-weight",{"color-white":""!=F.amount,"color-gray":""==F.amount||F.amount<=0}])},{default:s((()=>[u(f(e.$t("financing.t92")),1)])),_:1},8,["class"])])),_:1},8,["onClick","class"])])),_:1})])),_:1}),r(O,{ref:"accounts",type:"bottom"},{default:s((()=>[r(B,{class:"authPanel"},{default:s((()=>[r(B,{class:"title-box"},{default:s((()=>[r(A,{class:"font-15 font-weight color-black"},{default:s((()=>[u(f(0==F.direction?e.$t("financing.t93"):e.$t("financing.t94")),1)])),_:1}),r(B,{class:"close-icon",onClick:n[7]||(n[7]=t=>e.$refs.accounts.close())},{default:s((()=>[r(T,{name:"close",color:"var(--content-primary)",size:"48"})])),_:1})])),_:1}),r(B,{class:"list"},{default:s((()=>[(l(!0),h(g,null,m(F.accounts,((t,e)=>(l(),i(B,{class:d(["l-cell",{"bg-gray":0==F.direction&&F.findex==e||1==F.direction&&F.tindex==e}]),key:e,onClick:t=>{H.setAccount(e)}},{default:s((()=>[r(A,{class:d(["font-13 font-weight",{"color-primary":F.findex==e||F.tindex==e,"color-black":0==F.direction&&F.tindex==e||1==F.direction&&F.findex==e}])},{default:s((()=>[u(f(t.text),1)])),_:2},1032,["class"])])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1})])),_:1},512),r(O,{ref:"selectp",type:"bottom"},{default:s((()=>[r(B,{style:p({height:e.$device.windowHeight+"px"})},{default:s((()=>[r(S,{statusBar:"",isOccupy:"",title:e.$t("financing.t95"),onLeftClick:n[8]||(n[8]=t=>e.$refs.selectp.close()),background:"var(--background-primary)",color:"var(--content-primary)",onInit:H.navInit},{default:s((()=>[r(T,{name:"arrowleft",size:"56",color:"var(--content-primary)"})])),_:1},8,["title","onInit"]),r(B,{style:p({height:e.$device.windowHeight-F.navHeight+"px"})},{default:s((()=>[r(R,{"name-key":"symbol",nameKey:"symbol",dataList:F.coin,showAvatar:!0,field:F.accounts[F.findex]?F.accounts[F.findex]:F.accounts[0],onItemclick:H.itemclick},null,8,["dataList","field","onItemclick"])])),_:1},8,["style"])])),_:1},8,["style"])])),_:1},512),r(V,{ref:"loading"},null,512),r(D,{ref:"alert",title:e.$t("financing.t96"),content:F.content},null,8,["title","content"])])),_:1},8,["data-theme"])}],["__scopeId","data-v-f4d417c1"]]);export{H as default};
