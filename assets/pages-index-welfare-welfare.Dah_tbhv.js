import{v as t,t as e,w as a,x as s,bp as l,E as o,D as i,bm as n,A as c,c9 as r,u as f,m as d,a as h,b8 as u,i as w,b9 as g,l as k,aW as m,j as p,n as _,g as b,q as y,y as v,z as $,B as x,C,F as A,H as T,G as S,S as B}from"./index-DJtkXLbk.js";import{_ as L}from"./fui-icon.Di2eQoC1.js";import{r as z}from"./uni-app.es.DnKBEGT2.js";import{_ as H}from"./fui-nav-bar.jzMwm7nO.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as N}from"./fui-toast.Ddm5uvJW.js";import{f as q}from"./fui-button.U-Ib0VK3.js";const j=I({name:"fui-landscape",emits:["close"],props:{show:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},type:{type:String,default:"cancel"},color:{type:String,default:"#fff"},size:{type:[Number,String],default:28},position:{type:[Number,String],default:3},distance:{type:[Number,String],default:120},absolute:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!1},maskBackground:{type:String,default:"rgba(0,0,0,.6)"},zIndex:{type:Number,default:996},param:{type:[Number,String],default:0}},computed:{getStyles(){let t=Math.abs(Number(this.distance)),e=`bottom: -${t}rpx;`;return 3!=this.position&&(e=`top: -${t}rpx;`),e}},data:()=>({isShow:!1,src:"",text:"",isNvue:!1}),watch:{show:{handler(t){t?this.open():this.isShow=!1},immediate:!0}},mounted(){this.show&&this.open()},methods:{closeWin(t){this.maskClosable&&this.close(t)},open(){this.isShow=!0},close(t){this.$emit("close",{param:this.param})}}},[["render",function(d,h,u,w,g,k){const m=r,p=f;return g.isShow||!g.isNvue?(t(),e(p,{key:0,class:o(["fui-landscape__wrap",{"fui-landscape__fixed":!u.absolute,"fui-landscape__absolute":u.absolute,"fui-landscape__show":g.isShow}]),style:i({background:u.maskBackground,zIndex:u.zIndex}),onClick:n(k.closeWin,["stop"]),ref:"fui_landscape_ani"},{default:a((()=>[s(p,{class:"fui-landscape__inner"},{default:a((()=>[l(d.$slots,"default",{},void 0,!0),u.closable?(t(),e(p,{key:0,class:o(["fui-landscape__icon",{"fui-landscape__icon-rt":2==u.position,"fui-landscape__icon-def":3==u.position}]),style:i(k.getStyles)},{default:a((()=>[s(p,{onClick:n(k.close,["stop"])},{default:a((()=>[s(m,{type:u.type,size:u.size,color:u.color},null,8,["type","size","color"])])),_:1},8,["onClick"])])),_:1},8,["class","style"])):c("",!0)])),_:3})])),_:3},8,["class","style","onClick"])):c("",!0)}],["__scopeId","data-v-bfcc6db2"]]);const P=I({components:{fuiButton:q,fuiNavBar:H,fuiLandscape:j,fuiToast:N},data(){return{btnActive:0,navHeight:"",windowHeight:"",scrollHeight:"",checkinPop:!1,checkGroup:[{text:this.$t("welfare.st4"),checked:!1,rewards:"0.2"},{text:this.$t("welfare.st5"),checked:!1,rewards:"0.2"},{text:this.$t("welfare.st6"),checked:!1,rewards:"0.2"},{text:this.$t("welfare.st7"),checked:!1,rewards:"0.2"},{text:this.$t("welfare.st8"),checked:!1,rewards:"1"}],isChecked:!1,taskList:[],qdList:[],todaySign:!1,day:0,avaAmount:"--"}},onReady(){},onShow(){this.gettask(),this.getqdlist(),this.$nextTick((()=>{this.getAvaAmount()}))},computed:{...d(["userinfo"]),...h(["isLogin","userAccount","userNickname","userTheme"])},watch:{btnActive(t){this.gettask()}},methods:{getReward(t){u(),w.getReward(t.task_id,t.id).then((t=>{g(),200===t.code?(this.showToast(this.$t("welfare.suc"),1500),this.getAvaAmount(),this.gettask()):this.showToast(t.message,1500)})).catch((t=>{g(),this.showToast(res.message,1500)}))},withdraw(){if(parseFloat(this.avaAmount)<=150)return this.showToast(this.$t("welfare.txt32")+" 150.00 CBT"+this.$t("welfare.txt33"),1500),!1;u(),w.activeWithdraw().then((t=>{g(),200==t.code?(this.showToast(this.$t("welfare.suc"),1500),this.getAvaAmount()):this.showToast(t.message,1500)})).catch((t=>{g(),this.showToast(res.message,1500)}))},getAvaAmount(){w.getAvaAmount().then((t=>{this.avaAmount=t.data.amount}))},getqdlist(){w.getQdList().then((t=>{this.qdList=t.data.list,console.log(t.data),t.data.tsign&&(this.todaySign=!0),this.day=t.data.day}))},gettask(){var t=k("task_list");"object"==typeof t&&""!=t&&(this.taskList=t),w.getNewUserTaskList(this.btnActive).then((t=>{this.taskList=t.data.list,m("task_list",t.data.list)}))},navtoTask(t){"/pages/trade/trade"==t.path||"/pages/contract/contract"==t.path?p({url:t.path}):_({url:t.path})},navInit(t){this.getWindowHeight(),this.navHeight=t.height+t.statusBarHeight,this.scrollHeight=this.windowHeight-this.navHeight},getWindowHeight(){this.windowHeight=b().windowHeight},showTips(t){0==t&&this.showToast(this.$t("welfare.txt32")+" 150.00 CBT"+this.$t("welfare.txt33"),1e3),1==t&&this.showToast(this.$t("welfare.txt32")+"--CBT"+this.$t("welfare.txt33"),1e3)},checkIn(){this.isLogin?(u(),w.userSign(this.day).then((t=>{g(),this.closePopup(),200==t.code?(this.todaySign=!1,this.showToast(this.$t("welfare.st9"),1500),this.getqdlist(),this.getAvaAmount()):this.showToast(t.message,1500)}))):this.showToast(this.$t("welfare.st11"),1e3)},showToast(t,e){let a={};a.text=t,a.duration=e,this.$refs.toast.show(a)},closePopup(){this.isLogin&&(this.checkinPop=!1)}}},[["render",function(l,n,r,d,h,u){const w=z(y("fui-icon"),L),g=z(y("fui-nav-bar"),H),k=T,m=f,p=S,_=B,b=z(y("fui-landscape"),j),I=z(y("fui-toast"),N);return t(),e(m,{class:"welfare bg-dark","data-theme":l.userTheme},{default:a((()=>[s(g,{title:l.$t("welfare.txt1"),background:"var(--white)",color:"var(--black)",onLeftClick:n[0]||(n[0]=t=>l.$mroute.back()),onInit:u.navInit},{default:a((()=>[s(w,{name:"arrowleft",size:"56",color:"var(--black)"})])),_:1},8,["title","onInit"]),s(_,{"scroll-y":"",class:"scroll-view bg-dark",style:i({height:h.scrollHeight+"px"})},{default:a((()=>[s(m,{class:"banner"},{default:a((()=>[s(m,{class:"banner-title"},{default:a((()=>[s(k,{class:"font-18 font-weight color-white"},{default:a((()=>[v($(l.$t("welfare.txt1")),1)])),_:1}),s(k,{class:"font-13 font-weight color-white mt-15"},{default:a((()=>[v($(l.$t("welfare.txt2")),1)])),_:1})])),_:1}),s(m,{class:"checkin",onClick:n[1]||(n[1]=t=>h.checkinPop=l.isLogin)},{default:a((()=>[s(p,{src:"/assets/CheckIn-NLISkHEa.png",mode:""}),l.isLogin?(t(),e(k,{key:0,class:"font-12 color-white font-weight"},{default:a((()=>[v($(l.$t("welfare.txt3")),1)])),_:1})):(t(),e(k,{key:1,class:"font-12 color-white font-weight"},{default:a((()=>[v($(l.$t("welfare.btn0")),1)])),_:1})),s(w,{name:"arrowright",size:"38",color:"#ffffff"})])),_:1})])),_:1}),s(m,{class:"v-box"},{default:a((()=>[s(m,{class:"payments bg-linear-dark"},{default:a((()=>[s(m,{class:"title"},{default:a((()=>[s(k,{class:"font-12 color-white font-weight"},{default:a((()=>[v($(l.$t("welfare.txt4")),1)])),_:1}),s(m,{class:"right",onClick:n[2]||(n[2]=t=>l.$mroute.rewardsInfo())},{default:a((()=>[s(k,{class:"font-12 color-white"},{default:a((()=>[v($(l.$t("welfare.txt5")),1)])),_:1}),s(w,{name:"arrowright",size:"38",color:"var(--white)"},null,8,["color"])])),_:1})])),_:1}),0==l.isLogin?(t(),e(m,{key:0,class:"payments-bottom"},{default:a((()=>[s(m,{class:"item"},{default:a((()=>[s(m,{class:"cell"},{default:a((()=>[s(k,{class:"mr-5 linear-golden font-20 font-weight"},{default:a((()=>[v("****")])),_:1}),s(k,{class:"mr-5 font-12 color-white"},{default:a((()=>[v("CBT")])),_:1}),s(w,{name:"help-fill",size:"30",color:"var(--dark-gray)",onClick:n[3]||(n[3]=t=>u.showTips(0))},null,8,["color"])])),_:1})])),_:1}),s(m,{class:"item mt-15"},{default:a((()=>[s(m,{class:"button font-13 bg-linear-golden color-black font-weight",onClick:n[4]||(n[4]=t=>l.$mroute.login())},{default:a((()=>[v($(l.$t("welfare.btn0")),1)])),_:1})])),_:1})])),_:1})):(t(),e(m,{key:1,class:"payments-bottom isloginbox mt-15"},{default:a((()=>[1!==l.userinfo.status?(t(),e(m,{key:0,class:"tag-cell bg-golden"},{default:a((()=>[s(m,null,{default:a((()=>[s(w,{name:"info-fill",size:"30",color:"var(--color-text-golden)"},null,8,["color"]),s(k,{class:"font-11 color-golden ml-5"},{default:a((()=>[v($(l.$t("welfare.txt13")),1)])),_:1})])),_:1}),s(m,{onClick:n[5]||(n[5]=t=>l.$mroute.baseauth())},{default:a((()=>[s(k,{class:"font-11 color-white"},{default:a((()=>[v($(l.$t("welfare.btn3")),1)])),_:1}),s(w,{name:"arrowright",size:"38",color:"var(--white)"},null,8,["color"])])),_:1})])),_:1})):c("",!0),s(m,{class:"l-cell mt-15"},{default:a((()=>[s(m,{class:"left"},{default:a((()=>[s(k,{class:"mr-5 linear-golden font-16 font-weight"},{default:a((()=>[v($(l.$util.thousandSeparator(h.avaAmount,2)),1)])),_:1}),s(k,{class:"mr-5 font-12 color-white"},{default:a((()=>[v("CBT")])),_:1}),s(w,{name:"help-fill",size:"26",color:"var(--dark-gray)",onClick:n[6]||(n[6]=t=>u.showTips(0))},null,8,["color"])])),_:1}),s(m,{onClick:n[7]||(n[7]=t=>u.withdraw()),class:o([{"color-gray":h.avaAmount<150,"color-white":h.avaAmount>=150},"button bg-gray font-13 font-weight"])},{default:a((()=>[v($(l.$t("welfare.txt34")),1)])),_:1},8,["class"])])),_:1})])),_:1}))])),_:1})])),_:1}),s(m,{class:"task-list"},{default:a((()=>[s(m,{class:"title"},{default:a((()=>[s(k,{class:o(["font-16 font-weight",{"color-white":0===h.btnActive,"color-999":0!=h.btnActive}]),onClick:n[8]||(n[8]=t=>h.btnActive=0)},{default:a((()=>[v($(l.$t("welfare.txt6")),1)])),_:1},8,["class"]),s(k,{class:o(["font-16 font-weight",{"color-white":1===h.btnActive,"color-999":1!=h.btnActive}]),onClick:n[9]||(n[9]=t=>h.btnActive=1),style:{"margin-left":"20rpx"}},{default:a((()=>[v($(l.$t("welfare.txt6s")),1)])),_:1},8,["class"])])),_:1}),s(m,{class:"list-con bg-linear-dark"},{default:a((()=>[s(m,{class:"title"},{default:a((()=>[s(k,{class:"font-15 color-white font-weight"},{default:a((()=>[v($(0===h.btnActive?l.$t("welfare.txt6"):l.$t("welfare.txt6s")),1)])),_:1})])),_:1}),(t(!0),x(A,null,C(h.taskList,((o,i)=>(t(),e(m,{key:i,class:"cell-box"},{default:a((()=>[s(p,{class:"left-image",src:o.icon,mode:""},null,8,["src"]),s(m,{class:"center"},{default:a((()=>[s(k,{class:"font-14 color-white font-weight"},{default:a((()=>[v($(o.title),1)])),_:2},1024),s(k,{class:"font-12 color-gray mt-5"},{default:a((()=>[v($(o.desc),1)])),_:2},1024)])),_:2},1024),s(m,{class:"button"},{default:a((()=>[0==o.status?(t(),e(k,{key:0,class:"font-12 color-golden font-weight",onClick:t=>u.navtoTask(o)},{default:a((()=>[v($(o.btn_text),1)])),_:2},1032,["onClick"])):c("",!0),1==o.status?(t(),e(k,{key:1,class:"font-12 color-golden font-weight"},{default:a((()=>[v($(l.$t("welfare.txt43")),1)])),_:1})):c("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},8,["style"]),s(b,{show:h.checkinPop,maskBackground:"var(--mask-bakground-bg)",closable:!1},{default:a((()=>[s(m,{class:"check-in-pop"},{default:a((()=>[s(m,{class:"check-in-pop-top"},{default:a((()=>[s(m,{class:"check-in-title"},{default:a((()=>[s(k,{class:"font-16 font-weight color-white"},{default:a((()=>[v($(l.$t("welfare.st1"))+" ",1),s(k,{class:"color-golden font-weight"},{default:a((()=>[v($(l.$t("welfare.st2")),1)])),_:1})])),_:1}),s(k,{class:"font-12 color-gray"},{default:a((()=>[v($(l.$t("welfare.st3"))+" 25.00 CBT",1)])),_:1})])),_:1}),s(m,{class:"check-in-group"},{default:a((()=>[(t(!0),x(A,null,C(h.qdList,((i,n)=>(t(),e(m,{class:o(["check-item",i.status?"checked":""]),key:n},{default:a((()=>[s(p,{src:"/assets/check-BseIsp0w.png",mode:""}),s(k,{class:"font-12 color-white font-weight"},{default:a((()=>[v($(l.$t("welfare.d"))+$(i.day)+$(l.$t("welfare.day")),1)])),_:2},1024),s(k,{class:"font-12 color-white font-weight"},{default:a((()=>[v("+"+$(i.amount)+" CBT",1)])),_:2},1024)])),_:2},1032,["class"])))),128))])),_:1}),h.todaySign&&h.day<=h.qdList.length?(t(),e(m,{key:0,class:"check-in-button bg-linear-golden",onClick:u.checkIn},{default:a((()=>[s(k,{class:"font-13 color-black font-weight"},{default:a((()=>[v($(l.$t("welfare.st10")),1)])),_:1})])),_:1},8,["onClick"])):(t(),e(m,{key:1,class:"check-in-button bg-gray"},{default:a((()=>[h.day<h.qdList.length?(t(),e(k,{key:0,class:"font-13 color-gray font-weight"},{default:a((()=>[v($(l.$t("welfare.st12")),1)])),_:1})):(t(),e(k,{key:1,class:"font-13 color-gray font-weight"},{default:a((()=>[v($(l.$t("welfare.st12s")),1)])),_:1}))])),_:1}))])),_:1}),s(m,{class:"close",onClick:u.closePopup},{default:a((()=>[s(w,{name:"clear-fill",size:"56",color:"var(--color-text-dark-gray)"},null,8,["color"])])),_:1},8,["onClick"])])),_:1})])),_:1},8,["show","maskBackground"]),s(I,{size:"26",background:"var(--mask-bakground-bg)",ref:"toast"},null,8,["background"])])),_:1},8,["data-theme"])}],["__scopeId","data-v-8cbd4fd1"]]);export{P as default};
