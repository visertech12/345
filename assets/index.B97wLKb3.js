import{Y as r,a1 as a,R as o,Q as e,a4 as s,as as l,at as i,a8 as t,U as n,W as c,al as d,ab as u,x as v,Z as g,ag as f,_ as p,aD as h,aY as m,aI as y,I as b,af as S,F as w,aZ as z,au as x}from"./index-DJtkXLbk.js";const[I,L]=r("image");const P=S(a({name:I,props:{src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:g,height:g,radius:g,lazyLoad:Boolean,iconSize:g,showError:f,errorIcon:p("photo-fail"),iconPrefix:String,showLoading:f,loadingIcon:p("photo"),crossorigin:String,referrerpolicy:String},emits:["load","error"],setup(r,{emit:a,slots:g}){const f=o(!1),p=o(!0),S=o(),{$Lazyload:w}=e().proxy,z=s((()=>{const a={width:l(r.width),height:l(r.height)};return i(r.radius)&&(a.overflow="hidden",a.borderRadius=l(r.radius)),a}));t((()=>r.src),(()=>{f.value=!1,p.value=!0}));const x=r=>{p.value&&(p.value=!1,a("load",r))},I=()=>{const r=new Event("load");Object.defineProperty(r,"target",{value:S.value,enumerable:!0}),x(r)},P=r=>{f.value=!0,p.value=!1,a("error",r)},$=(a,o,e)=>e?e():v(b,{name:a,size:r.iconSize,class:o,classPrefix:r.iconPrefix},null),j=()=>{if(f.value||!r.src)return;const a={alt:r.alt,class:L("img"),style:{objectFit:r.fit,objectPosition:r.position},crossorigin:r.crossorigin,referrerpolicy:r.referrerpolicy};return r.lazyLoad?h(v("img",y({ref:S},a),null),[[m("lazy"),r.src]]):v("img",y({ref:S,src:r.src,onLoad:x,onError:P},a),null)},B=({el:r})=>{const a=()=>{r===S.value&&p.value&&I()};S.value?a():u(a)},E=({el:r})=>{r!==S.value||f.value||P()};return w&&n&&(w.$on("loaded",B),w.$on("error",E),c((()=>{w.$off("loaded",B),w.$off("error",E)}))),d((()=>{u((()=>{var a;(null==(a=S.value)?void 0:a.complete)&&!r.lazyLoad&&I()}))})),()=>{var a;return v("div",{class:L({round:r.round,block:r.block}),style:z.value},[j(),p.value&&r.showLoading?v("div",{class:L("loading")},[$(r.loadingIcon,L("loading-icon"),g.loading)]):f.value&&r.showError?v("div",{class:L("error")},[$(r.errorIcon,L("error-icon"),g.error)]):void 0,null==(a=g.default)?void 0:a.call(g)])}}})),[$,j]=r("cell-group");const B=S(a({name:$,inheritAttrs:!1,props:{title:String,inset:Boolean,border:f},setup(r,{slots:a,attrs:o}){const e=()=>{var e;return v("div",y({class:[j({inset:r.inset}),{[x]:r.border&&!r.inset}]},o,z()),[null==(e=a.default)?void 0:e.call(a)])};return()=>r.title||a.title?v(w,null,[v("div",{class:j("title",{inset:r.inset})},[a.title?a.title():r.title]),e()]):e()}}));export{B as C,P as I};
