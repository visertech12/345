import{Y as t,a1 as e,R as a,ah as s,a2 as o,ai as l,a4 as i,at as n,a9 as r,al as c,a8 as d,aj as h,x as u,bD as f,ag as p,Z as m,bE as w,ab as g,aa as y,O as _,ae as b,av as $,aK as k,ap as v,a3 as x,az as C,a6 as j,a7 as T,bA as F,af as I,I as z,a as L,i as S,f as O,q as A,t as N,w as V,u as P,v as R,y as B,z as D,A as U,D as E,B as H,C as K,F as Y,H as J,G as M,b5 as Z,J as q,E as G}from"./index-DJtkXLbk.js";import{_ as W}from"./fui-icon.Di2eQoC1.js";import{r as X}from"./uni-app.es.DnKBEGT2.js";import{_ as Q}from"./fui-nav-bar.jzMwm7nO.js";import{_ as tt}from"./coin-indexed-xlist.MFkcItu4.js";import{_ as et}from"./uni-popup.CzvQehha.js";import{_ as at}from"./alert.Dea_H56C.js";import{_ as st}from"./loading.4tTz4-j4.js";import{_ as ot}from"./authPop.J76QaGfj.js";import{u as lt}from"./user.Bg4aheva.js";import{_ as it}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{N as nt}from"./index.BDukOuvF.js";import{C as rt}from"./index.BTzSSswx.js";import"./uni-popup-dialog.BcHbARwi.js";import"./fui-loading.PBeNzzTK.js";import"./fui-button.Bz1nWTaC.js";import"./use-route.Cub6D_1b.js";const[ct,dt]=t("index-bar"),ht={sticky:p,zIndex:m,teleport:[String,Object],highlightColor:String,stickyOffsetTop:w(0),indexList:{type:Array,default:function(){const t="A".charCodeAt(0);return Array(26).fill("").map(((e,a)=>String.fromCharCode(t+a)))}}},ut=Symbol(ct);var ft=e({name:ct,props:ht,emits:["select","change"],setup(t,{emit:e,slots:p}){const m=a(),w=a(),x=a(""),C=s(),j=o(m),{children:T,linkChildren:F}=l(ut);let I;F({props:t});const z=i((()=>{if(n(t.zIndex))return{zIndex:+t.zIndex+1}})),L=i((()=>{if(t.highlightColor)return{color:t.highlightColor}})),S=(e,a)=>{for(let s=T.length-1;s>=0;s--){const o=s>0?a[s-1].height:0;if(e+(t.sticky?o+t.stickyOffsetTop:0)>=a[s].top)return s}return-1},O=t=>T.find((e=>String(e.index)===t)),A=()=>{if(y(m))return;const{sticky:e,indexList:a}=t,s=_(j.value),o=b(j),l=T.map((t=>t.getRect(j.value,o)));let i=-1;if(I){const t=O(I);if(t){const e=t.getRect(j.value,o);i=S(e.top,l)}}else i=S(s,l);x.value=a[i],e&&T.forEach(((e,a)=>{const{state:n,$el:r}=e;if(a===i||a===i-1){const t=r.getBoundingClientRect();n.left=t.left,n.width=t.width}else n.left=null,n.width=null;if(a===i)n.active=!0,n.top=Math.max(t.stickyOffsetTop,l[a].top-s)+o.top;else if(a===i-1&&""===I){const t=l[i].top-s;n.active=t>0,n.top=t+o.top-l[a].height}else n.active=!1})),I=""},N=()=>{g(A)};r("scroll",A,{target:j,passive:!0}),c(N),d((()=>t.indexList),N),d(x,(t=>{t&&e("change",t)}));const V=a=>{I=String(a);const s=O(I);if(s){const a=_(j.value),o=b(j),{offsetHeight:l}=document.documentElement;if(s.$el.scrollIntoView(),a===l-o.height)return void A();t.sticky&&t.stickyOffsetTop&&$(k()-t.stickyOffsetTop),e("select",s.index)}},P=t=>{const{index:e}=t.dataset;e&&V(e)},R=t=>{P(t.target)};let B;const D=()=>u("div",{ref:w,class:dt("sidebar"),style:z.value,onClick:R,onTouchstartPassive:C.start},[t.indexList.map((t=>{const e=t===x.value;return u("span",{class:dt("index",{active:e}),style:e?L.value:void 0,"data-index":t},[t])}))]);return h({scrollTo:V}),r("touchmove",(t=>{if(C.move(t),C.isVertical()){v(t);const{clientX:e,clientY:a}=t.touches[0],s=document.elementFromPoint(e,a);if(s){const{index:t}=s.dataset;t&&B!==t&&(B=t,P(s))}}}),{target:w}),()=>{var e;return u("div",{ref:m,class:dt()},[t.teleport?u(f,{to:t.teleport},{default:()=>[D()]}):D(),null==(e=p.default)?void 0:e.call(p)])}}});const[pt,mt]=t("index-anchor");const wt=I(e({name:pt,props:{index:m},setup(t,{slots:e}){const s=x({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),o=a(),{parent:l}=C(ut);if(!l)return;const n=()=>s.active&&l.props.sticky,r=i((()=>{const{zIndex:t,highlightColor:e}=l.props;if(n())return j(T(t),{left:s.left?`${s.left}px`:void 0,width:s.width?`${s.width}px`:void 0,transform:s.top?`translate3d(0, ${s.top}px, 0)`:void 0,color:e})}));return h({state:s,getRect:(t,e)=>{const a=b(o);return s.rect.height=a.height,t===window||t===document.body?s.rect.top=a.top+k():s.rect.top=a.top+_(t)-e.top,s.rect}}),()=>{const a=n();return u("div",{ref:o,style:{height:a?`${s.rect.height}px`:void 0}},[u("div",{style:r.value,class:[mt({sticky:a}),{[F]:a}]},[e.default?e.default():t.index])])}}})),gt=I(ft);var yt=0;const _t=it({components:{[nt.name]:nt,[z.name]:z,[gt.name]:gt,[wt.name]:wt,[rt.name]:rt,fuiNavBar:Q},data:()=>({coin:[],netlist:[],net:!1,current:!1,token:"",amount:"",content:"",title:"",type:""}),onShow(){setTimeout((()=>{0===yt&&(yt=1,this.$refs.selectp.open())}),200)},onReady(){yt=0,this.getCurrency()},computed:{...L(["userTheme"])},methods:{confirm(t){this.$refs.authPop.close(),this.$refs.loading.open(),S.postWithdraw({amount:this.amount,network:this.netlist[this.net].id,currency_id:this.current.id,address:this.token,code:t,type:this.type}).then((t=>{if(this.$refs.loading.close(),200!=t.code)return this.content=t.message,this.$refs.alert.open(),!1;this.current.balance=parseFloat(this.current.balance)-this.amount,this.amount="",this.content=this.$t("with.t26"),this.$refs.alert.open()})).catch((t=>{this.$refs.loading.close()}))},withDraw(){return!1!==this.current&&!1!==this.net&&(""==this.token||""==this.amount||parseFloat(this.amount)<=0?(this.content=this.$t("with.t27"),this.$refs.alert.open(),!1):parseFloat(this.amount)<=parseFloat(this.current.recharge_min)?(this.content=this.$t("with.t28")+this.current.recharge_min+this.current.symbol,this.$refs.alert.open(),!1):!(parseFloat(this.amount)>parseFloat(this.current.balance))&&(this.$refs.loading.open(),void lt.getUniCode().then((t=>{this.$refs.loading.close(),0!=t.data.type?(this.type=t.data.type,"google"===t.data.type&&(this.title=this.$t("secrety.google_ver")),"email"===t.data.type&&(this.title=this.$t("secrety.email_ver")),"phone"===t.data.type&&(this.title=this.$t("secrety.phone_ver")),this.$refs.authPop.open()):(this.content=this.$t("secrety.fail_send"),this.$refs.alert.open())}))))},getCurrency(){S.getAccountCurrency().then((t=>{this.coin=t.data;let e=[];for(var a=0;a<this.coin.length;a++)"USDT"==this.coin[a].symbol&&e.push(this.coin[a]);this.coin=e,this.current=this.coin[0],this.getNetList(this.coin[0].id)}))},getNetList(t){S.getNetList(t).then((t=>{this.netlist=t.data.list,this.netlist=this.netlist.filter((t=>"OMNI"!==t.symbol)),this.net=0}))},itemclick(t){this.current=t,this.getNetList(t.id),this.$refs.selectp.close()},scan(){O({title:this.$t("with.t29"),icon:"none",duration:2e3})}}},[["render",function(t,e,a,s,o,l){const i=X(A("fui-icon"),W),n=X(A("fui-nav-bar"),Q),r=J,c=M,d=P,h=Z,f=q,p=X(A("coin-indexed-xlist"),tt),m=X(A("uni-popup"),et),w=X(A("alert"),at),g=X(A("loading"),st),y=X(A("authPop"),ot);return R(),N(d,{class:"withdraw","data-theme":t.userTheme},{default:V((()=>[u(n,{isFixed:"",zIndex:"9",isOccupy:"",statusBar:"",title:t.$t("with.t1"),background:"var(--background-primary)",color:"var(--content-primary)",onLeftClick:e[0]||(e[0]=e=>t.$mroute.back()),onRightClick:e[1]||(e[1]=e=>t.$mroute.withrecord())},{right:V((()=>[u(i,{class:"mr-10",name:"order-fill",size:"40",color:"var(--content-tertiary)"})])),default:V((()=>[u(i,{name:"arrowleft",size:"56",color:"var(--content-primary)"})])),_:1},8,["title"]),u(d,{class:"withdraw-body"},{default:V((()=>[u(d,{class:"withdraw-body-cell"},{default:V((()=>[u(r,{class:"font-13 color-black font-weight"},{default:V((()=>[B(D(t.$t("with.t2")),1)])),_:1}),u(d,{class:"withdraw-body-cell-box mt-10",onClick:e[2]||(e[2]=e=>t.$refs.selectp.open())},{default:V((()=>[!1===o.current?(R(),N(d,{key:0,class:"flex align-center"},{default:V((()=>[u(c,{class:"coin-icon",src:"/static/coin/btc.png",mode:"widthFix"}),u(r,{class:"font-12 color-black font-weight"},{default:V((()=>[B("BTC")])),_:1})])),_:1})):(R(),N(d,{key:1,class:"flex align-center"},{default:V((()=>[u(c,{class:"coin-icon",src:o.current.icon,mode:"widthFix"},null,8,["src"]),u(r,{class:"font-12 color-black font-weight"},{default:V((()=>[B(D(o.current.symbol),1)])),_:1})])),_:1})),u(c,{class:"down-icon",src:`/static/img/tactic/down-${t.userTheme}.png`,mode:"widthFix"},null,8,["src"])])),_:1})])),_:1}),u(d,{class:"withdraw-body-cell mt-15"},{default:V((()=>[u(r,{class:"font-13 color-black font-weight"},{default:V((()=>[B(D(t.$t("with.t3")),1)])),_:1}),u(d,{class:"withdraw-body-cell-box mt-10",onClick:e[3]||(e[3]=e=>t.$refs.chain.open())},{default:V((()=>[u(d,{class:"flex align-center"},{default:V((()=>[!1===o.net?(R(),N(r,{key:0,class:"font-12 color-gray"},{default:V((()=>[B(D(t.$t("with.t4")),1)])),_:1})):(R(),N(r,{key:1,class:"font-12 color-black font-weight"},{default:V((()=>[B(D(o.netlist[o.net].symbol),1)])),_:1}))])),_:1}),u(c,{class:"down-icon",src:`/static/img/tactic/down-${t.userTheme}.png`,mode:"widthFix"},null,8,["src"])])),_:1})])),_:1}),u(d,{class:"withdraw-body-cell mt-15"},{default:V((()=>[u(r,{class:"font-13 color-black font-weight"},{default:V((()=>[B(D(t.$t("with.t5")),1)])),_:1}),u(d,{class:"withdraw-body-cell-box mt-10"},{default:V((()=>[u(h,{type:"text",modelValue:o.token,"onUpdate:modelValue":e[4]||(e[4]=t=>o.token=t),class:"font-13 color-black font-weight",placeholder:t.$t("with.t25"),"placeholder-class":"placeholder"},null,8,["modelValue","placeholder"]),u(c,{class:"down-icon",src:`/static/img/tactic/down-${t.userTheme}.png`,mode:"widthFix"},null,8,["src"])])),_:1})])),_:1}),u(d,{class:"withdraw-body-cell mt-15"},{default:V((()=>[u(d,{class:"flex align-center justify-between"},{default:V((()=>[u(r,{class:"font-13 color-black font-weight"},{default:V((()=>[B(D(t.$t("with.t6")),1)])),_:1}),!1!==o.current?(R(),N(d,{key:0},{default:V((()=>[u(r,{class:"font-13 font-weight color-black"},{default:V((()=>[B(D(t.$t("with.t7"))+" "+D(t.$util.thousandSeparator(t.$util.str2number(o.current.balance)))+" "+D(o.current.symbol),1)])),_:1})])),_:1})):U("",!0)])),_:1}),u(d,{class:"withdraw-body-cell-box mt-10"},{default:V((()=>[u(h,{type:"number",modelValue:o.amount,"onUpdate:modelValue":e[5]||(e[5]=t=>o.amount=t),disabled:!1===o.current||o.current.balance<=0,class:"font-13 font-weight color-black",placeholder:!1===o.current||o.current.balance<=0?t.$t("with.t8"):"","placeholder-class":"placeholder"},null,8,["modelValue","disabled","placeholder"]),u(d,{onClick:e[6]||(e[6]=t=>o.amount=o.current.balance)},{default:V((()=>[u(r,{class:"font-13 font-weight color-primary"},{default:V((()=>[B(D(t.$t("with.t9")),1)])),_:1})])),_:1})])),_:1})])),_:1}),u(d,{class:"withdraw-body-card mt-15"},{default:V((()=>[u(d,{class:"withdraw-body-card-cell"},{default:V((()=>[u(r,{class:"font-12 color-gray"},{default:V((()=>[B(D(t.$t("with.t10")),1)])),_:1}),u(r,{class:"font-12 color-black font-weight"},{default:V((()=>[B(D(o.current.with_min)+" "+D(o.current.symbol),1)])),_:1})])),_:1}),u(d,{class:"withdraw-body-card-cell"},{default:V((()=>[u(r,{class:"font-12 color-gray"},{default:V((()=>[B(D(t.$t("with.t11")),1)])),_:1}),u(r,{class:"font-12 color-black font-weight"},{default:V((()=>[B(D(o.current.with_max),1)])),_:1})])),_:1}),u(d,{class:"withdraw-body-card-cell"},{default:V((()=>[u(r,{class:"font-12 color-gray"},{default:V((()=>[B(D(t.$t("with.t12")),1)])),_:1}),u(r,{class:"font-12 color-black font-weight"},{default:V((()=>[B(D(o.current.with_max),1)])),_:1})])),_:1})])),_:1}),u(d,{class:"withdraw-body-tips mt-15"},{default:V((()=>[u(r,{class:"font-13 color-black font-weight"},{default:V((()=>[B(D(t.$t("with.t13")),1)])),_:1}),u(r,{class:"font-12 color-gray"},{default:V((()=>[B(D(t.$t("with.t14")),1)])),_:1}),u(r,{class:"font-12 color-gray"},{default:V((()=>[B(D(t.$t("with.t15")),1)])),_:1})])),_:1})])),_:1}),u(d,{class:"withdraw-footer"},{default:V((()=>[u(d,{class:"withdraw-footer-left"},{default:V((()=>[u(d,{class:"flex align-center"},{default:V((()=>[u(r,{class:"font-13 color-gray mr-10"},{default:V((()=>[B(D(t.$t("with.t16")),1)])),_:1}),""==o.amount||o.amount<0?(R(),N(r,{key:0,class:"font-13 color-black font-weight"},{default:V((()=>[B(" 0.00 "+D(o.current.symbol),1)])),_:1})):(R(),N(r,{key:1,class:"font-13 color-black font-weight"},{default:V((()=>[B(D(o.amount-o.current.with_charge)+" "+D(o.current.symbol),1)])),_:1}))])),_:1}),u(d,{class:"flex align-center mt-5"},{default:V((()=>[u(r,{class:"font-13 color-gray mr-10"},{default:V((()=>[B(D(t.$t("with.t17")),1)])),_:1}),u(r,{class:"font-13 color-black font-weight"},{default:V((()=>[B(D(t.$util.thousandSeparator(t.$util.str2number(o.current.with_charge)))+" "+D(o.current.symbol),1)])),_:1})])),_:1})])),_:1}),u(f,{"hover-class":"none",class:"withdraw-footer-button button-active",onClick:e[7]||(e[7]=t=>l.withDraw())},{default:V((()=>[u(r,{class:"font-13 color-white font-weight"},{default:V((()=>[B(D(t.$t("with.t18")),1)])),_:1})])),_:1})])),_:1}),u(m,{ref:"selectp",type:"bottom",style:{height:"100%",width:"100%"}},{default:V((()=>[u(d,{style:E({height:t.$device.windowHeight+"px"})},{default:V((()=>[u(n,{zIndex:"2",background:"var(--background-primary)",color:"var(--content-primary)",title:t.$t("financing.t85"),onLeftClick:e[8]||(e[8]=e=>t.$refs.selectp.close())},{default:V((()=>[u(i,{name:"arrowleft",size:"56",color:"var(--content-primary)"})])),_:1},8,["title"]),u(p,{"name-key":"symbol",nameKey:"symbol",dataList:o.coin,showAvatar:!0,onItemclick:l.itemclick},null,8,["dataList","onItemclick"])])),_:1},8,["style"])])),_:1},512),u(m,{ref:"chain",type:"bottom"},{default:V((()=>[u(d,{class:"popup-wrap"},{default:V((()=>[u(d,{class:"popup-wrap-title"},{default:V((()=>[u(r,{class:"font-16 color-black font-weight"},{default:V((()=>[B(D(t.$t("with.t20")),1)])),_:1}),u(d,{class:"close-icon",onClick:e[9]||(e[9]=e=>t.$refs.chain.close())},{default:V((()=>[u(i,{name:"close",size:"48",color:"var(--content-primary)"})])),_:1})])),_:1}),u(d,{class:"popup-wrap-content"},{default:V((()=>[u(d,{class:"popup-wrap-content-tip"},{default:V((()=>[u(r,{class:"font-12 color-gray"},{default:V((()=>[B(D(t.$t("with.t21")),1)])),_:1})])),_:1}),u(d,{class:"popup-wrap-content-list"},{default:V((()=>[(R(!0),H(Y,null,K(o.netlist,((e,a)=>(R(),N(d,{onClick:e=>{o.net=a,t.$refs.chain.close()},class:G(["popup-wrap-content-list-item",{"popup-wrap-content-list-item-active":o.net===a}])},{default:V((()=>[u(r,{class:"font-13 font-weight color-black mr-10"},{default:V((()=>[B(D(e.symbol),1)])),_:2},1024),u(r,{class:"font-12 font-weight color-gray"},{default:V((()=>[B(D(t.$t("with.t22"))+"ï¼š"+D(t.$util.thousandSeparator(t.$util.str2number(o.current.with_charge)))+" "+D(o.current.symbol),1)])),_:1})])),_:2},1032,["onClick","class"])))),256))])),_:1})])),_:1})])),_:1})])),_:1},512),u(w,{ref:"alert",title:t.$t("with.t23"),content:o.content},null,8,["title","content"]),u(g,{ref:"loading"},null,512),u(y,{ref:"authPop",title:o.title,onCallback:l.confirm},null,8,["title","onCallback"])])),_:1},8,["data-theme"])}],["__scopeId","data-v-be142e05"]]);export{_t as default};
