import{be as e,v as t,t as s,w as i,x as l,bm as a,E as o,D as n,bp as r,A as c,u as p}from"./index-DJtkXLbk.js";import{_ as h}from"./_plugin-vue_export-helper.BCo6x5W8.js";const d=h({name:"fui-collapse-item",emits:["change"],props:{index:{type:[Number,String],default:0},disabled:{type:Boolean,default:!1},background:{type:String,default:"#fff"},animation:{type:Boolean,default:!0},open:{type:Boolean,default:!1},isBorder:{type:Boolean,default:!0},borderColor:{type:String,default:""},borderLeft:{type:[Number,String],default:0},arrow:{type:Boolean,default:!0},arrowColor:{type:String,default:"#B2B2B2"},arrowRight:{type:[Number,String],default:24},contentBg:{type:String,default:"#fff"}},data:()=>({isOpen:!1,isHeight:null,height:0,elId:`fui_${Math.ceil(1e6*Math.random()).toString(36)}`}),watch:{open(e){this.isOpen=e}},updated(e){this.$nextTick((()=>{setTimeout((()=>{this.init()}),50)}))},created(){this.collapse=this.getCollapse(),this.collapse&&-1===this.collapse.children.indexOf(this)&&this.collapse.children.push(this),this.oldHeight=0},beforeUnmount(){this.uninstall()},mounted(){this.$nextTick((()=>{setTimeout((()=>{this.init(),this.isOpen=this.open}),50)}))},methods:{init(){this.getCollapseHeight()},uninstall(){this.collapse&&this.collapse.children.forEach(((e,t)=>{e===this&&this.collapse.children.splice(t,1)}))},onClick(e){this.disabled||(this.isOpen=e,this.collapse?this.collapse.collapseChange(this,e,this.index):this.$emit("change",{index:this.index,isOpen:e}))},getCollapseHeight(t=0){e().in(this).select(`#${this.elId}`).fields({size:!0},(e=>{if(!(t>=10)){if(!e)return t++,void this.getCollapseHeight(t);this.height=e.height,this.isHeight=!0}})).exec()},getNvueHeight(){dom.getComponentRect(this.$refs.fui_collapse__el,(e=>{e&&e.result&&e.size&&(this.height=e.size.height,this.isHeight=!0)}))},getCollapse(e="fui-collapse"){let t=this.$parent,s=t.$options.name;for(;s!==e;){if(t=t.$parent,!t)return!1;s=t.$options.name}return t}}},[["render",function(e,h,d,u,f,_){const g=p;return t(),s(g,{class:"fui-collapse__item"},{default:i((()=>[l(g,{onClick:h[0]||(h[0]=a((e=>_.onClick(!f.isOpen)),["stop"])),class:o(["fui-collapse-item__title",{"fui-collapse__disabled":d.disabled}]),style:n({background:d.background})},{default:i((()=>[l(g,{class:"fui-collapse__title"},{default:i((()=>[r(e.$slots,"default",{},void 0,!0)])),_:3}),d.arrow?(t(),s(g,{key:0,class:o([{"fui-collapse__arrow-close":!f.isOpen,"fui-collapse__arrow-active":f.isOpen,"fui-collapse__item-ani":d.animation},"fui-collapse__arrow"]),style:n({marginRight:d.arrowRight+"rpx"})},{default:i((()=>[l(g,{class:"fui-collapse__arrow-inner",style:n({borderColor:d.arrowColor})},null,8,["style"])])),_:1},8,["class","style"])):c("",!0),d.isBorder?(t(),s(g,{key:1,style:n({background:d.borderColor,left:d.borderLeft+"rpx"}),class:o(["fui-collapse__border",{"fui-collapse__border-color":!d.borderColor}])},null,8,["style","class"])):c("",!0)])),_:3},8,["class","style"]),l(g,{class:o(["fui-collapse__content-wrap",{"fui-collapse-__content-ani":d.animation}]),style:n({height:(f.isOpen?f.height:0)+"px",background:d.contentBg})},{default:i((()=>[l(g,{id:f.elId,ref:"fui_collapse__el",class:o(["fui-collapse__content",{"fui-collapse__content-open":f.isHeight}])},{default:i((()=>[r(e.$slots,"content",{},void 0,!0)])),_:3},8,["id","class"])])),_:3},8,["class","style"])])),_:3})}],["__scopeId","data-v-88fd08b8"]]);const u=h({name:"fui-collapse",emits:["change"],props:{accordion:{type:Boolean,default:!1}},created(){this.children=[]},methods:{collapseChange(e,t,s){this.accordion&&t&&this.children.forEach(((t,s)=>{t!==e&&(t.isOpen=!1)})),this.$emit("change",{index:s,isOpen:t})}}},[["render",function(e,l,a,o,n,c){const h=p;return t(),s(h,{class:"fui-collapse__wrap"},{default:i((()=>[r(e.$slots,"default",{},void 0,!0)])),_:3})}],["__scopeId","data-v-f0c3c18f"]]);export{d as _,u as a};
