import{a as t,bJ as a,b8 as e,i as s,b9 as o,q as r,t as i,w as n,u as l,v as u,x as c,y as d,z as p,H as f,G as h}from"./index-DJtkXLbk.js";import{_ as m}from"./fui-icon.Di2eQoC1.js";import{r as g}from"./uni-app.es.DnKBEGT2.js";import{_ as b}from"./fui-nav-bar.jzMwm7nO.js";import{_}from"./fui-button.Bz1nWTaC.js";import{_ as $}from"./alert.Dea_H56C.js";import{u as x}from"./user.Bg4aheva.js";import{_ as v}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-popup-dialog.BcHbARwi.js";import"./uni-popup.CzvQehha.js";var y=!1;const k=v({data(){return{title:this.$t("login.tip_t2"),content:"",ctxt:this.$t("取消"),preview:"/static/img/b5.png",info:{}}},onLoad(t){t.index&&(this.index=parseInt(t.index))},onShow(){this.getInfo()},computed:{...t(["userTheme"])},methods:{submit(){if(!y)return this.content=this.$t("auths.t40"),this.$refs.alert.open(),!1;e(),x.submitHightAuth(y).then((t=>{o(),200!=t.code?(this.content=t.message,this.$refs.alert.open()):this.$mroute.authing()})).catch((t=>{this.content=this.$t("auths.t32"),this.$refs.alert.open(),o()}))},getInfo(){x.baseAuthInfo().then((t=>{void 0!==t.data.id&&t.data.id&&(this.info=t.data,this.$forceUpdate())}))},upload(t){var r=this;a({count:1,mediaType:["video"],sourceType:["album","camera"],maxDuration:10,sizeType:["compressed"],success(t){console.log(t),e({title:"uploading"}),s.uploadFile(t.tempFilePath).then((t=>{o();var a=JSON.parse(t.data);console.log(a.code),200!=a.code&&(r.content=a.message,r.$refs.alert.open()),y=a.data.url,r.preview=y,r.submit()})).catch((t=>{console.log(t),o(),r.content=r.$t("auths.t32"),r.$refs.alert.open()}))}})}}},[["render",function(t,a,e,s,o,x){const v=g(r("fui-icon"),m),y=g(r("fui-nav-bar"),b),k=f,j=h,w=l,I=g(r("fui-button"),_),z=g(r("alert"),$);return u(),i(w,{class:"baseAuth","data-theme":t.userTheme},{default:n((()=>[c(y,{statusBar:"",isFixed:"",isOccupy:"",zIndex:"9",title:t.$t("auths.t33"),color:"var(--content-primary)",background:"var(--background-primary)",onLeftClick:a[0]||(a[0]=a=>t.$mroute.back())},{default:n((()=>[c(v,{name:"arrowleft",size:"56",color:"var(--content-primary)"})])),_:1},8,["title"]),c(w,{class:"baseAuth-container"},{default:n((()=>[c(w,{class:"upload-label"},{default:n((()=>[c(k,{class:"font-14 color-black font-weight"},{default:n((()=>[d(p(t.$t("auths.t34")),1)])),_:1}),c(j,{class:"upload-image",src:o.preview,onClick:a[1]||(a[1]=t=>x.upload(1)),mode:"widthFix"},null,8,["src"])])),_:1}),c(w,{class:"upload-tips"},{default:n((()=>[c(k,{class:"font-13 color-black font-weight"},{default:n((()=>[d(p(t.$t("auths.t35")),1)])),_:1}),c(k,{class:"font-13 color-gray mt-10"},{default:n((()=>[d(p(t.$t("auths.t36")),1)])),_:1}),c(k,{class:"font-13 color-gray mt-5"},{default:n((()=>[d(p(t.$t("auths.t37")),1)])),_:1})])),_:1})])),_:1}),o.info.img3?(u(),i(w,{key:1,class:"footer-button"},{default:n((()=>[c(w,{class:"_button"},{default:n((()=>[c(k,{class:"font-14 color-gray font-weight"},{default:n((()=>[d(p(t.$t("auths.t39")),1)])),_:1})])),_:1})])),_:1})):(u(),i(w,{key:0,class:"footer-button"},{default:n((()=>[c(I,{background:"var(--content-primary)",color:"var(--background-primary)",size:"26",radius:"78rpx",height:"78rpx",text:t.$t("auths.t38"),onClick:x.submit},null,8,["text","onClick"])])),_:1})),c(z,{ref:"alert",title:o.title,content:o.content,ctxt:o.ctxt},null,8,["title","content","ctxt"])])),_:1},8,["data-theme"])}],["__scopeId","data-v-d1a51e9c"]]);export{k as default};
