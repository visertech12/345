import{I as t,l as e,$ as l,a as s,q as o,t as a,w as r,u as i,v as n,x as c,y as u,z as f,B as d,C as p,F as h,H as g,b5 as m,G as _,b6 as b,E as y}from"./index-DJtkXLbk.js";import{_ as w}from"./fui-icon.Di2eQoC1.js";import{r as x}from"./uni-app.es.DnKBEGT2.js";import{_ as $}from"./fui-nav-bar.jzMwm7nO.js";import{_ as k}from"./fui-tag.DcXe62xw.js";import{_ as P}from"./fui-dropdown-menu.DQYFSUGe.js";import{_ as v}from"./fui-button.Bz1nWTaC.js";import{_ as T}from"./uni-popup.CzvQehha.js";import{_ as j}from"./loading.4tTz4-j4.js";import{_ as C}from"./alert.Dea_H56C.js";import{c as V}from"./contract.CRMtuJ7L.js";import{_ as F}from"./h0.DaLqgquu.js";import{_ as A}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{N as S}from"./index.BDukOuvF.js";import"./fui-loading.PBeNzzTK.js";import"./uni-popup-dialog.BcHbARwi.js";const U=A({components:{[S.name]:S,[t.name]:t},data(){return{content:"",actions:[this.$t("entrust.t2"),this.$t("entrust.t3")],futures:{},newPrice:"0.00",profitType:0,profitPprice:"",profitPwrice:"",profitAmount:"",loseType:0,losePprice:"",losePwprice:"",loseAmount:"",slideVal:[0,0]}},onShow(){this.futures=e("futures-order")},onReady(){var t=this;l("contract",(e=>{t.onContractMessageHandler(e)}))},computed:{...s(["userTheme"])},methods:{filterTap(t){0==t&&this.$refs.numRange.show(),1==t&&this.$refs.loseRange.show()},confirm(){if(parseFloat(this.profitPwrice)<=0||""==this.profitPwrice)return this.content=this.$t("entrust.t24"),this.$refs.alert.open(),!1;if(parseFloat(this.profitAmount)<=0||""==this.profitAmount)return this.content=this.$t("entrust.t25"),this.$refs.alert.open(),!1;if(parseFloat(this.losePwprice)<=0||""==this.losePwprice)return this.content=this.$t("entrust.t26"),this.$refs.alert.open(),!1;if(parseFloat(this.profitAmount)<=0||""==this.profitAmount)return this.content=this.$t("entrust.t27"),this.$refs.alert.open(),!1;const t={cid:this.futures.id,profitType:this.profitType,profitPprice:""==this.profitPprice?0:this.profitPprice,profitPwprice:this.profitPwrice,profitAmount:this.profitAmount,loseType:this.loseType,losePprice:""==this.losePprice?0:this.losePprice,losePwrice:this.losePwprice,loseAmount:this.loseAmount,nowPrice:this.newPrice};console.log(t),this.$refs.loading.open(),V.limitProfit(t).then((t=>{this.$refs.loading.close(),200!=t.code?this.content=t.message:this.content=this.$t("entrust.t4"),this.profitAmount="",this.profitPprice="",this.profitPwrice="",this.loseAmount="",this.losePprice="",this.losePwprice="",this.$refs.alert.open()})).catch((t=>{this.$refs.loading.close(),this.content=this.$t("common.error"),this.$refs.alert.open()}))},sliderChangeLose(t){const e=parseFloat(this.futures.amount)-parseFloat(this.futures.close);this.loseAmount=parseFloat(e*t.detail.value/100).toFixed(8)},getProfit(t){if(0===t){if(""===this.profitPwrice&&0===this.profitType)return"0.00";if(0===this.profitType)var e=this.profitPwrice;else e=this.profitPprice;var l=this.profitAmount}else{if(""===this.losePwprice&&0===this.profitType)return"0.00";if(0===this.loseType)e=this.losePwprice;else e=this.losePprice;l=this.loseAmount}var s=parseFloat(this.futures.price);if(1===parseInt(this.futures.direction))var o=this.$util.thousandSeparator(l*(e-s),4);else o=this.$util.thousandSeparator(l*(s-e),4);return o>0?"+ "+o:o},sliderChange(t){const e=parseFloat(this.futures.amount)-parseFloat(this.futures.close);this.profitAmount=parseFloat(e*t.detail.value/100).toFixed(8)},selectTypeLose(t){console.log(t),0==t.index&&(this.losePprice=""),this.loseType=t.index},selectType(t){0==t.index&&(this.profitPprice=""),this.profitType=t.index},onContractMessageHandler(t){if(200==t.type){var e=t.data.data[this.futures.currency_id.toString()];if(void 0===e||""==e)return;this.newPrice=e.c}}}},[["render",function(t,e,l,s,V,A){const S=x(o("fui-icon"),w),U=x(o("fui-nav-bar"),$),z=x(o("fui-tag"),k),H=g,D=i,R=m,L=_,I=x(o("fui-dropdown-menu"),P),B=b,E=x(o("fui-button"),v),M=x(o("uni-popup"),T),N=x(o("loading"),j),O=x(o("alert"),C);return n(),a(D,{class:"entrust","data-theme":t.userTheme},{default:r((()=>[c(U,{zIndex:"9",statusBar:"",isFixed:"",isOccupy:"",background:"var(--background-primary)",color:"var(--content-primary)",title:t.$t("entrust.t1"),onLeftClick:e[0]||(e[0]=e=>t.$mroute.back()),onRightClick:e[1]||(e[1]=e=>t.$refs.showHelp.open())},{right:r((()=>[c(S,{name:"help-fill",size:"40",color:"var(--content-tertiary)"})])),default:r((()=>[c(S,{name:"arrowleft",size:"56",color:"var(--content-primary)"},null,8,["color"])])),_:1},8,["title"]),c(D,{class:"entrust-container"},{default:r((()=>[c(D,{class:""},{default:r((()=>[c(D,{class:"cell-row flex flex-row align-center"},{default:r((()=>[c(z,{size:"20",radius:"4",isBorder:!1,padding:["8rpx","10rpx"],color:"var(--content-always-white)",background:1==V.futures.direction?"var(--content-trade-buy)":"var(--content-trade-sell)",theme:"dark",marginRight:"10",default:""},{default:r((()=>[u(f(1==V.futures.direction?t.$t("entrust.t5"):t.$t("entrust.t6")),1)])),_:1},8,["background"]),c(H,{class:"font-14 font-weight color-black"},{default:r((()=>[u(f(V.futures.symbol)+"USDT PERP",1)])),_:1}),c(z,{size:"20",radius:"4",isBorder:!1,padding:["8rpx","10rpx"],marginLeft:"10",marginRight:"10",color:"var(--content-tertiary)",background:"var(--background-secondary)",default:""},{default:r((()=>[u(f(1==V.futures.margin_type?t.$t("entrust.t7"):t.$t("entrust.t8"))+f(V.futures.muilt)+"X ",1)])),_:1})])),_:1}),c(D,{type:"two",class:"cell-row flex align-center justify-between"},{default:r((()=>[c(D,{class:"item flex flex-column"},{default:r((()=>[c(H,{class:"font-12 color-gray"},{default:r((()=>[u(f(t.$t("entrust.t9")),1)])),_:1}),c(H,{class:"font-12 color-black font-weight mt-5"},{default:r((()=>[u(f(t.$util.thousandSeparator(V.futures.price)),1)])),_:1})])),_:1}),c(D,{class:"item flex flex-column align-center"},{default:r((()=>[c(H,{class:"font-12 color-gray"},{default:r((()=>[u(f(t.$t("entrust.t10")),1)])),_:1}),c(H,{class:"font-12 color-black font-weight mt-5"},{default:r((()=>[u(f(t.$util.thousandSeparator(V.newPrice)),1)])),_:1})])),_:1}),c(D,{class:"item flex flex-column align-end"},{default:r((()=>[c(H,{class:"font-12 color-gray"},{default:r((()=>[u(f(t.$t("entrust.t11")),1)])),_:1}),1==V.futures.direction?(n(),a(H,{key:0,class:"font-12 color-black font-weight mt-5"},{default:r((()=>[u(f(parseFloat(V.futures.price)-parseFloat(V.futures.sp)<=0?this.$t("contruct.nl_yp"):t.$util.thousandSeparator(parseFloat(V.futures.price)-parseFloat(V.futures.sp),2)),1)])),_:1})):(n(),a(H,{key:1,class:"font-12 color-black font-weight mt-5"},{default:r((()=>[u(f(t.$util.thousandSeparator(parseFloat(V.futures.price)+parseFloat(V.futures.sp),2)),1)])),_:1}))])),_:1})])),_:1}),c(D,{class:"cell-row flex align-center"},{default:r((()=>[c(H,{class:"font-14 price_up font-weight"},{default:r((()=>[u(f(t.$t("entrust.t12")),1)])),_:1})])),_:1}),c(D,{class:"cell-row flex flex-row align-center justify-between"},{default:r((()=>[c(D,{class:"item"},{default:r((()=>[c(D,{class:"item-top flex flex-row align-center"},{default:r((()=>[c(H,{class:"font-12 color-gray"},{default:r((()=>[u(f(t.$t("entrust.t13")),1)])),_:1})])),_:1}),c(D,{class:"input-box flex flex-row align-center justify-between bg-gray"},{default:r((()=>[c(R,{type:"text",modelValue:V.profitPwrice,"onUpdate:modelValue":e[2]||(e[2]=t=>V.profitPwrice=t),placeholder:t.$t("entrust.t15"),class:"color-black","placeholder-class":"placeholder"},null,8,["modelValue","placeholder"]),c(H,{class:"font-12 font-weight color-black"},{default:r((()=>[u("USDT")])),_:1})])),_:1}),c(D,{class:"mt-5"},{default:r((()=>[c(H,{class:"font-10 color-gray"},{default:r((()=>[u(f(t.$t("entrust.t16"))+f(1==V.futures.direction?"≥":"≤")+f(t.$t("entrust.t17")),1)])),_:1})])),_:1})])),_:1}),c(D,{class:"item"},{default:r((()=>[c(I,{background:"var(--background-secondary-100)",size:24,maxHeight:270,radius:10,padding:"24rpx",selectedColor:"var(--color-primary)",color:"var(--content-primary)",right:"0",minWidth:120,isCheckbox:!1,options:V.actions,ref:"numRange",onClick:A.selectType},{default:r((()=>[c(D,{class:"item-top flex flex-row align-center justify-between"},{default:r((()=>[c(H,{class:"font-12 color-gray"},{default:r((()=>[u(f(t.$t("entrust.t14")),1)])),_:1}),c(D,{class:"tag-button flex flex-row align-center justify-between bg-gray",onClick:e[3]||(e[3]=t=>A.filterTap(0))},{default:r((()=>[c(H,{class:"font-12 color-black font-weight"},{default:r((()=>[u(f(V.actions[V.profitType]),1)])),_:1}),c(L,{src:F,mode:""})])),_:1})])),_:1})])),_:1},8,["background","options","onClick"]),c(D,{class:"input-box flex flex-row align-center justify-between bg-gray"},{default:r((()=>[c(R,{type:"text",modelValue:V.profitPprice,"onUpdate:modelValue":e[4]||(e[4]=t=>V.profitPprice=t),disabled:0==V.profitType,placeholder:0==V.profitType?t.$t("entrust.t2"):t.$t("entrust.t15"),class:"color-black","placeholder-class":"placeholder"},null,8,["modelValue","disabled","placeholder"]),c(H,{class:"font-12 font-weight color-black"},{default:r((()=>[u("USDT")])),_:1})])),_:1}),c(D,{class:"mt-5"},{default:r((()=>[c(H,{class:"font-10 color-gray"},{default:r((()=>[u(f(t.$t("entrust.t19")),1)])),_:1})])),_:1})])),_:1})])),_:1}),c(D,null,{default:r((()=>[c(D,{class:"cell-row"},{default:r((()=>[c(H,{class:"font-14 color-black font-weight"},{default:r((()=>[u(f(t.$t("entrust.t20")),1)])),_:1}),c(D,{class:"cell-row-input flex align-center justify-between bg-gray mt-5"},{default:r((()=>[c(R,{type:"text",modelValue:V.profitAmount,"onUpdate:modelValue":e[5]||(e[5]=t=>V.profitAmount=t),placeholder:t.$t("entrust.t20"),class:"color-black","placeholder-class":"placeholder"},null,8,["modelValue","placeholder"]),c(H,{class:"font-12 font-weight color-black"},{default:r((()=>[u("USDT")])),_:1})])),_:1})])),_:1}),c(D,{class:"slider-box"},{default:r((()=>[c(D,{class:"slider-box-top"},{default:r((()=>[c(B,{class:"slider",value:"0",onChange:A.sliderChange,onChanging:e[6]||(e[6]=t=>V.slideVal[0]=t.detail.value),backgroundColor:"var(--color-gray-bg)","block-color":"var(--blue)","block-size":"20",step:"1"},null,8,["onChange","block-color"]),c(D,{class:"slider-points"},{default:r((()=>[(n(),d(h,null,p([0,25,50,75,100],(t=>c(H,{class:y(["points",V.slideVal[0]>=t?"active":""]),key:t},null,8,["class"]))),64))])),_:1})])),_:1}),c(D,{class:"slider-box-bottom"},{default:r((()=>[(n(),d(h,null,p([0,25,50,75,100],(t=>c(H,{class:y(["font-11 font-weight",V.slideVal[0]>=t?"color-black":"color-gray"]),key:t},{default:r((()=>[u(f(t+"%"),1)])),_:2},1032,["class"]))),64))])),_:1})])),_:1}),c(D,{class:"cell-row flex align-center justify-between"},{default:r((()=>[c(H,{class:"font-12 color-gray"},{default:r((()=>[u(f(t.$t("entrust.t21")),1)])),_:1}),c(D,{class:"flex align-center"},{default:r((()=>[c(H,{class:"font-12 color-black font-weight"},{default:r((()=>[u(f(V.futures.amount)+"/"+f(V.futures.amount-V.futures.close)+" "+f(V.futures.symbol),1)])),_:1})])),_:1})])),_:1}),c(D,{class:"cell-row flex align-center justify-between"},{default:r((()=>[c(H,{class:"font-12 color-gray"},{default:r((()=>[u(f(t.$t("entrust.t22")),1)])),_:1}),c(H,{class:"font-12 price_up font-weight"},{default:r((()=>[u(f(A.getProfit(0))+" USDT",1)])),_:1})])),_:1})])),_:1}),c(D,{class:"cell-row"},{default:r((()=>[c(H,{class:"font-14 price_down font-weight"},{default:r((()=>[u(f(t.$t("entrust.t23")),1)])),_:1})])),_:1}),c(D,{class:"cell-row flex align-center justify-between"},{default:r((()=>[c(D,{class:"item"},{default:r((()=>[c(D,{class:"item-top flex align-center"},{default:r((()=>[c(H,{class:"font-12 color-gray"},{default:r((()=>[u(f(t.$t("entrust.t13")),1)])),_:1})])),_:1}),c(D,{class:"input-box flex align-center justify-between bg-gray"},{default:r((()=>[c(R,{type:"text",modelValue:V.losePwprice,"onUpdate:modelValue":e[7]||(e[7]=t=>V.losePwprice=t),placeholder:t.$t("entrust.t15"),class:"color-black","placeholder-class":"placeholder"},null,8,["modelValue","placeholder"]),c(H,{class:"font-12 font-weight color-black"},{default:r((()=>[u("USDT")])),_:1})])),_:1}),c(D,{class:"mt-5"},{default:r((()=>[c(H,{class:"font-10 color-gray"},{default:r((()=>[u(f(t.$t("entrust.t16"))+f(1==V.futures.direction?"≤":"≥")+f(t.$t("entrust.t17")),1)])),_:1})])),_:1})])),_:1}),c(D,{class:"item"},{default:r((()=>[c(I,{background:"var(--white)",size:24,maxHeight:270,radius:10,padding:"24rpx",selectedColor:"var(--blue)",color:"var(--color-text-dark-gray)",right:"0",minWidth:120,isCheckbox:!1,options:V.actions,ref:"loseRange",onClick:A.selectTypeLose},{default:r((()=>[c(D,{class:"item-top flex align-center justify-between"},{default:r((()=>[c(H,{class:"font-12 color-gray"},{default:r((()=>[u(f(t.$t("entrust.t14")),1)])),_:1}),c(D,{class:"tag-button flex align-center justify-between bg-gray",onClick:e[8]||(e[8]=t=>A.filterTap(1))},{default:r((()=>[c(H,{class:"font-12 color-black font-weight"},{default:r((()=>[u(f(V.actions[V.loseType]),1)])),_:1}),c(L,{src:F})])),_:1})])),_:1})])),_:1},8,["background","options","onClick"]),c(D,{class:"input-box flex align-center justify-between bg-gray"},{default:r((()=>[c(R,{type:"text",modelValue:V.losePprice,"onUpdate:modelValue":e[9]||(e[9]=t=>V.losePprice=t),disabled:0==V.loseType,placeholder:0==V.loseType?t.$t("entrust.t18"):t.$t("entrust.t15"),class:"color-black","placeholder-class":"placeholder"},null,8,["modelValue","disabled","placeholder"]),c(H,{class:"font-12 font-weight color-black"},{default:r((()=>[u("USDT")])),_:1})])),_:1}),c(D,{class:"mt-5"},{default:r((()=>[c(H,{class:"font-10 color-gray"},{default:r((()=>[u(f(t.$t("entrust.t19")),1)])),_:1})])),_:1})])),_:1})])),_:1}),c(D,{class:"cell-row"},{default:r((()=>[c(H,{class:"font-14 color-black font-weight"},{default:r((()=>[u(f(t.$t("entrust.t20")),1)])),_:1}),c(D,{class:"cell-row-input bg-gray flex flex-row align-center justify-between mt-5"},{default:r((()=>[c(R,{type:"text",modelValue:V.loseAmount,"onUpdate:modelValue":e[10]||(e[10]=t=>V.loseAmount=t),placeholder:t.$t("entrust.t20"),class:"color-black","placeholder-class":"placeholder"},null,8,["modelValue","placeholder"]),c(H,{class:"font-12 font-weight color-black"},{default:r((()=>[u("USDT")])),_:1})])),_:1})])),_:1}),c(D,{class:"slider-box"},{default:r((()=>[c(D,{class:"slider-box-top"},{default:r((()=>[c(B,{class:"slider",value:"0",backgroundColor:"var(--color-gray-bg)",onChange:A.sliderChangeLose,onChanging:e[11]||(e[11]=t=>V.slideVal[1]=t.detail.value),"block-color":"var(--content-primary)","block-size":"20",step:"1"},null,8,["onChange"]),c(D,{class:"slider-points"},{default:r((()=>[(n(),d(h,null,p([0,25,50,75,100],(t=>c(H,{class:y(["points",V.slideVal[1]>=t?"active":""]),key:t},null,8,["class"]))),64))])),_:1})])),_:1}),c(D,{class:"slider-box-bottom"},{default:r((()=>[(n(),d(h,null,p([0,25,50,75,100],(t=>c(H,{class:y(["font-11 font-weight",V.slideVal[1]>=t?"color-black":"color-gray"]),key:t},{default:r((()=>[u(f(t+"%"),1)])),_:2},1032,["class"]))),64))])),_:1})])),_:1}),c(D,{class:"cell-row flex align-center justify-between"},{default:r((()=>[c(H,{class:"font-12 color-gray"},{default:r((()=>[u(f(t.$t("entrust.t21")),1)])),_:1}),c(D,{class:"flex align-center"},{default:r((()=>[c(H,{class:"font-12 color-black font-weight"},{default:r((()=>[u(f(V.futures.amount)+"/"+f(V.futures.amount-V.futures.close)+" "+f(V.futures.symbol),1)])),_:1})])),_:1})])),_:1}),c(D,{class:"cell-row flex flex-row align-center justify-between"},{default:r((()=>[c(H,{class:"font-12 color-gray"},{default:r((()=>[u(f(t.$t("entrust.t22")),1)])),_:1}),c(D,{class:"flex align-center"},{default:r((()=>[c(H,{class:"font-12 price_up font-weight"},{default:r((()=>[u(f(A.getProfit(1))+" USDT",1)])),_:1})])),_:1})])),_:1}),c(D,{style:{width:"100%",height:"140rpx"}})])),_:1}),c(D,{class:"button-box"},{default:r((()=>[c(E,{onClick:A.confirm,background:"var(--content-primary)",color:"var(--background-primary)",radius:"78rpx",height:"78rpx",size:"26"},{default:r((()=>[u(f(t.$t("确定")),1)])),_:1},8,["onClick"])])),_:1}),c(M,{ref:"showHelp",type:"bottom"},{default:r((()=>[c(D,{class:"popup-wrap"},{default:r((()=>[c(D,{class:"popup-title"},{default:r((()=>[c(H,{class:"font-16 font-weight color-black"},{default:r((()=>[u(f(t.$t("entrust.t28")),1)])),_:1}),c(D,{class:"close-icon"},{default:r((()=>[c(S,{onClick:e[12]||(e[12]=e=>t.$refs.showHelp.close()),name:"close",size:"48",color:"var(--black)"})])),_:1})])),_:1}),c(D,{class:"popup-content-box"},{default:r((()=>[c(D,{class:"popup-content-box-cell"},{default:r((()=>[c(D,null,{default:r((()=>[c(H,{class:"font-14 font-weight color-black"},{default:r((()=>[u("1. "+f(t.$t("entrust.t29")),1)])),_:1})])),_:1}),c(D,{class:"mt-5"},{default:r((()=>[c(H,{class:"font-13 color-gray"},{default:r((()=>[u(f(t.$t("entrust.t30")),1)])),_:1})])),_:1}),c(D,{class:"mt-10"},{default:r((()=>[c(H,{class:"font-14 font-weight color-black"},{default:r((()=>[u("2. "+f(t.$t("entrust.t31")),1)])),_:1})])),_:1}),c(D,{class:"mt-5"},{default:r((()=>[c(H,{class:"font-13 color-gray"},{default:r((()=>[u(f(t.$t("entrust.t32")),1)])),_:1})])),_:1}),c(D,{class:"mt-10"},{default:r((()=>[c(H,{class:"font-14 font-weight color-black"},{default:r((()=>[u("3. "+f(t.$t("entrust.t33")),1)])),_:1})])),_:1}),c(D,{class:"mt-5"},{default:r((()=>[c(H,{class:"font-13 color-gray"},{default:r((()=>[u(f(t.$t("entrust.t34")),1)])),_:1})])),_:1}),c(D,{class:"mt-10"},{default:r((()=>[c(H,{class:"font-14 font-weight color-black"},{default:r((()=>[u("4. "+f(t.$t("entrust.t35")),1)])),_:1})])),_:1}),c(D,{class:"mt-5"},{default:r((()=>[c(H,{class:"font-13 color-gray"},{default:r((()=>[u(f(t.$t("entrust.t36")),1)])),_:1})])),_:1}),c(D,{class:"bottom"},{default:r((()=>[c(E,{onClick:e[13]||(e[13]=e=>t.$refs.showHelp.close()),color:"var(--background-primary)",background:"var(--content-primary)",radius:"78rpx",height:"78rpx",size:"26"},{default:r((()=>[u(f(t.$t("entrust.t37")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1}),c(N,{ref:"loading"},null,512),c(O,{ref:"alert",content:V.content,title:t.$t("login.tip_t2")},null,8,["content","title"])])),_:1},8,["data-theme"])}],["__scopeId","data-v-2c606182"]]);export{U as default};
