import{a_ as t,$ as e,a$ as s,a,l,b0 as c,b1 as i,g as o,aW as r,o as n,b2 as d,n as u,q as h,aX as f,t as _,w as m,u as g,v as y,x as p,B as b,C as w,F as v,A as k,y as x,z as C,D as $,H as S,S as L,G as T,E as I}from"./index-DJtkXLbk.js";import{_ as z}from"./fui-nav-bar.jzMwm7nO.js";import{r as M}from"./uni-app.es.DnKBEGT2.js";import{_ as j}from"./fui-button.Bz1nWTaC.js";import{e as U}from"./emptyView.DCr5M3Jb.js";import{c as H}from"./currency.DmkscNLR.js";import{_ as D}from"./slide-button.BtuTtO-G.js";import{_ as q}from"./check-s.DGG9M_rm.js";import{_ as R}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./fui-empty.DSVpH_3j.js";const A=R({components:{slideButton:D,emptyView:U},data(){return{showList:0,symbolIndex:0,navTabs:[this.$t("index.tab_t1"),this.$t("index.spot"),this.$t("index.popup_c")],containerHeight:"",headHeight:"",tradeLabel:[],currency:[],contract:[],contractLabel:[],tradeActive:0,active:0,mList:[],sindex:0,sort:[{type:0,active:"/static/img/z-nomal.png",img:"/static/img/z-nomal.png",up:"/static/img/z-up-sms.png",down:"/static/img/z-down-sms.png"},{type:0,active:"/static/img/z-nomal.png",img:"/static/img/z-nomal.png",up:"/static/img/z-up-sms.png",down:"/static/img/z-down-sms.png"},{type:0,active:"/static/img/z-nomal.png",img:"/static/img/z-nomal.png",up:"/static/img/z-up-sms.png",down:"/static/img/z-down-sms.png"},{type:0,active:"/static/img/z-nomal.png",img:"/static/img/z-nomal.png",up:"/static/img/z-up-sms.png",down:"/static/img/z-down-sms.png"}],options:[this.$t("index.spot"),this.$t("index.popup_c")],findex:0,symbol:this.$util.getLCS(),symbol_rate:this.$util.getLCR(),timer:null}},onReady(){this.getTradeMatches(),this.getContractMatches(),this.getTradeSelect(),setInterval((()=>{0===t.prototype.getStatus()&&(this.getTradeMatches(),e("trades",(t=>{this.onTradeMessage(t)}))),0===s.prototype.getStatus()&&(this.getContractMatches(),e("contract",(t=>{this.onContractMessage(t)})))}),1e3);let a=this;e("addSelect",(()=>{0===a.symbolIndex?a.getTradeSelect():a.getContractSelect()})),e("switchLan",(t=>{this.options=[this.$t("index.spot"),this.$t("index.popup_c")],this.navTabs=[this.$t("index.tab_t1"),this.$t("index.spot"),this.$t("index.popup_c")],this.getTradeMatches(),this.getContractMatches()}))},computed:{...a(["userTheme","lang"])},watch:{symbolIndex(t){0===t?this.getTradeSelect():this.getContractSelect()}},onShow(){1==l("load")&&(0==this.symbolIndex?this.getTradeSelect():this.getContractSelect(),c("load"))},mounted(){this.setRate()},beforeUnmount(){this.clearTimers()},methods:{setRate(){this.timer=setInterval((()=>{e("currency",(()=>{this.symbol=i.getLCS(),this.symbol_rate=i.getLCR()})),e("contract",(t=>{this.onContractMessage(t)}))}),6e4)},clearTimers(){clearInterval(this.timer)},navInit(t){this.containerHeight=o().windowHeight-t.height-t.statusBarHeight},onContractMessage(t){200===t.type&&(2===this.active&&this.contract.length>0&&(this.contract[0].currency=this.$util.compareCurrency(this.contract[0].currency,t.data.data)),1===this.symbolIndex&&this.mList.length>0&&(this.mList=this.$util.compareCurrency(this.mList,t.data.data))),500===t.type&&(this.contract[2].currency=this.$util.compareCurrency(this.contract[2].currency,t.data.data))},onTradeMessage(t){if(100!=t.type)return!1;if(0==this.active&&0==this.symbolIndex)try{this.mList=this.$util.compareCurrency(this.mList,t.data),this.$forceUpdate()}catch(e){console.log(e)}if(1==this.active)try{this.currency=this.$util.compareCurrency(this.currency,t.data),this.$forceUpdate()}catch(e){console.log(e)}},async getContractMatches(){let t=l("contract-matches");""!=t&&void 0!==t||(t=await H.contractCurrencyList(),r("contract-matches",t.data),t=t.data);for(var e=[],s=0;s<t.length;s++)e.push(t[s].title[this.lang]);this.contract=t,this.contractLabel=e},async getTradeMatches(){let t=l("trade-currency");""!=t&&void 0!==t||(t=await H.tradeCurrencyList(),r("trade-currency",t.data),t=t.data);for(var e=[],s=0;s<t.length;s++)e.push(t[s].title[this.lang]);console.log(this.lang,this.tradeLabel),this.tradeLabel=e,this.currency=t[0].currency},getContractSelect(){var t=l("select-contract");void 0!==t&&t.length>0?(this.showList=1,this.mList=t):(this.showList=0,this.mList=[])},getTradeSelect(){var t=l("select-trade");void 0!==t&&t.length>0?(this.showList=1,this.mList=t):(this.showList=0,this.mList=[])},selectMine(){let t=[];if(0===this.symbolIndex)for(let s=0;s<this.currency.length;s++)void 0!==this.currency[s].select&&this.currency[s].select||t.push(this.currency[s]);else this.contract[0].currency.map((e=>{void 0!==e.select&&e.select||t.push(e)}));let e="";e=0===this.symbolIndex?"select-trade":"select-contract",t.length>0&&(n({key:e,data:t}),this.showList=1,this.mList=t),d("addSelect")},switchSort(t,e){return this.sindex=e,0==this.sort[t].type?(this.sort[t].type=1,this.sort[t].active=this.sort[t].down,void this.sortCurrency(t)):1==this.sort[t].type?(this.sort[t].type=2,this.sort[t].active=this.sort[t].up,void this.sortCurrency(t)):2==this.sort[t].type?(this.sort[t].type=0,this.sort[t].active=this.sort[t].img,void this.sortCurrency(t)):void 0},sortCurrency(t){if(0==this.active)var e=[...this.mList];if(1==this.active)e=[...this.currency];if(2==this.active)e=[...this.contract];if(0==t)var s="symbol";if(1==t)s="quota";if(2==t)s="new_price";if(3==t)s="change_rate";if(1==this.sort[t].type)if("symbol"===s)var a=e.sort(((t,e)=>JSON.stringify(e[s]).localeCompare(t[s],"en",{numeric:"symbol"!=s})));else a=e.sort(((t,e)=>e[s]-t[s]));if(2==this.sort[t].type)if("symbol"===s)a=e.sort(((t,e)=>JSON.stringify(e[s]).localeCompare(t[s],"en",{numeric:"symbol"!=s})));else a=e.sort(((t,e)=>t[s]-e[s]));if(0==this.sort[t].type)a=e.sort(((t,e)=>t.id-e.id));0==this.active&&(this.mList=a),1==this.active&&(this.currency=a),2==this.active&&(this.contract=a),this.$forceUpdate()},toKline(t,e,s=0){u({url:"/pages/trade/kline?id="+t+"&cid="+e+"&type="+s})},selectItem(t){console.log(t.select)}}},[["render",function(t,e,s,a,l,c){const i=S,o=g,r=L,n=T,d=M(h("fui-nav-bar"),z),u=M(h("fui-button"),j),U=f("empty-view");return y(),_(o,{class:"store","data-theme":t.userTheme},{default:m((()=>[p(d,{statusBar:"",isFixed:"",isOccupy:"",padding:0,zIndex:"999",background:"var(--background-primary)",custom:"",onInit:t.navInit},{default:m((()=>[p(o,{class:"nav-bar"},{default:m((()=>[p(r,{class:"nav-scroll","show-scrollbar":"false","scroll-with-animation":"true","scroll-into-view":`scrollTab${t.active}`},{default:m((()=>[(y(!0),b(v,null,w(t.navTabs,((e,s)=>(y(),_(o,{class:"item",id:`scrollTab${s}`,key:s,onClick:e=>t.active=s},{default:m((()=>[p(i,{class:I(["font-15 font-weight",t.active==s?"color-black":"color-gray"])},{default:m((()=>[x(C(e),1)])),_:2},1032,["class"])])),_:2},1032,["id","onClick"])))),128))])),_:1},8,["scroll-into-view"]),p(n,{class:"nav-search",onClick:e[0]||(e[0]=e=>t.$mroute.coinSearch()),src:`/static/newImage/search-${t.userTheme}.png`,mode:"widthFix"},null,8,["src"])])),_:1})])),_:1},8,["onInit"]),p(o,{class:"store-container",style:$({height:t.containerHeight+"px"})},{default:m((()=>[p(o,{class:"store-container-head"},{default:m((()=>[0==t.active?(y(),_(o,{key:0,class:"head-top"},{default:m((()=>[p(o,{class:"slider-buttons"},{default:m((()=>[(y(!0),b(v,null,w(t.options,((e,s)=>(y(),_(o,{class:I(["item",{active:t.symbolIndex==s}]),key:s,onClick:e=>t.symbolIndex=s},{default:m((()=>[p(i,{class:I(["font-12 font-weight",t.symbolIndex==s?"color-black":"color-gray"])},{default:m((()=>[x(C(e),1)])),_:2},1032,["class"])])),_:2},1032,["class","onClick"])))),128))])),_:1}),p(n,{onClick:e[1]||(e[1]=e=>t.$mroute.editMine(this.symbolIndex)),class:"edit-image",src:`/static/img/tactic/bj-${t.userTheme}.png`},null,8,["src"])])),_:1})):k("",!0),1===t.active?(y(),_(o,{key:1,class:"head-top"},{default:m((()=>[p(o,{class:"slider-buttons"},{default:m((()=>[(y(!0),b(v,null,w(t.tradeLabel,((e,s)=>(y(),_(o,{class:I(["item",{active:t.tradeActive==s}]),key:s,onClick:e=>t.tradeActive=s},{default:m((()=>[0===s?(y(),_(i,{key:0,class:I(["font-12 font-weight",t.tradeActive==s?"color-black":"color-gray"])},{default:m((()=>[x(C(e),1)])),_:2},1032,["class"])):k("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})):k("",!0),2==t.active?(y(),_(o,{key:2,class:"head-top"},{default:m((()=>[p(o,{class:"slider-buttons"},{default:m((()=>[(y(!0),b(v,null,w(t.contractLabel,((e,s)=>(y(),_(o,{class:I(["item",{active:t.findex==s}]),key:s,onClick:e=>t.findex=s},{default:m((()=>[p(i,{class:I(["font-12 font-weight",t.findex==s?"color-black":"color-gray"])},{default:m((()=>[x(C(e),1)])),_:2},1032,["class"])])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})):k("",!0),p(o,{class:"head-bottom"},{default:m((()=>[0==t.active&&0==t.showList?(y(),_(o,{key:0},{default:m((()=>[p(i,{class:"font-13 color-black font-weight"},{default:m((()=>[x(C(t.$t("store.maybe_in")),1)])),_:1})])),_:1})):(y(),_(o,{key:1,class:"sort-menu"},{default:m((()=>[p(o,{class:"sort-menu-cell"},{default:m((()=>[p(o,{class:"item",onClick:e[2]||(e[2]=e=>t.switchSort(0))},{default:m((()=>[p(i,{class:"font-12 color-light"},{default:m((()=>[x(C(t.$t("index.name")),1)])),_:1}),p(n,{src:t.sort[0].active},null,8,["src"])])),_:1}),p(o,{class:"item",onClick:e[3]||(e[3]=e=>t.switchSort(1))},{default:m((()=>[p(i,{class:"font-12 color-light"},{default:m((()=>[x(C(t.$t("store.turnover")),1)])),_:1}),p(n,{src:t.sort[1].active},null,8,["src"])])),_:1})])),_:1}),p(o,{class:"sort-menu-cell"},{default:m((()=>[p(o,{class:"item",onClick:e[4]||(e[4]=e=>t.switchSort(2))},{default:m((()=>[p(i,{class:"font-12 color-light"},{default:m((()=>[x(C(t.$t("index.latest_price")),1)])),_:1}),p(n,{src:t.sort[2].active},null,8,["src"])])),_:1}),p(o,{class:"item",onClick:e[5]||(e[5]=e=>t.switchSort(3))},{default:m((()=>[p(i,{class:"font-12 color-light"},{default:m((()=>[x(C(t.$t("index.quote_change")),1)])),_:1}),p(n,{src:t.sort[3].active},null,8,["src"])])),_:1})])),_:1})])),_:1}))])),_:1})])),_:1}),p(r,{"scroll-y":"",class:"store-container-scrollview",style:$({height:t.containerHeight+"px"})},{default:m((()=>[0==t.active?(y(),_(o,{key:0},{default:m((()=>[0==t.showList?(y(),_(o,{key:0,class:"card-list"},{default:m((()=>[p(o,{class:"card-list-box"},{default:m((()=>[0==t.symbolIndex?(y(!0),b(v,{key:0},w(t.currency,((e,s)=>(y(),_(o,{key:"lc"+e.id,class:"card-list-item",onClick:t=>e.select=!e.select},{default:m((()=>[p(o,{class:"_row"},{default:m((()=>[p(o,{class:"_row_coin flex align-center"},{default:m((()=>[p(i,{class:"font-12 color-black font-weight"},{default:m((()=>[x(C(e.symbol),1)])),_:2},1024),p(i,{class:"font-12 color-gray ml-5"},{default:m((()=>[x(" / USDT ")])),_:1})])),_:2},1024)])),_:2},1024),p(o,{class:"_row"},{default:m((()=>[p(i,{class:"font-14 color-black font-weight"},{default:m((()=>[x(C(t.$util.thousandSeparator(e.new_price,e.decimals)),1)])),_:2},1024)])),_:2},1024),p(o,{class:"_row"},{default:m((()=>[p(i,{class:I(["font-12 font-weight",e.change_rate>=0?"price_up":"price_down"])},{default:m((()=>[x(C(e.change_rate)+"% ",1)])),_:2},1032,["class"]),p(o,{class:"check-box"},{default:m((()=>[e.select?k("",!0):(y(),_(n,{key:0,src:q}))])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)):k("",!0),1==t.symbolIndex?(y(!0),b(v,{key:1},w(t.contract[0].currency,((e,s)=>(y(),_(o,{key:"lc"+e.id,class:"card-list-item",onClick:t=>e.select=!e.select},{default:m((()=>[p(o,{class:"_row"},{default:m((()=>[p(o,{class:"_row_coin flex align-center"},{default:m((()=>[p(i,{class:"font-12 color-gray font-weight"},{default:m((()=>[x(C(e.symbol)+"USDT ",1)])),_:2},1024)])),_:2},1024)])),_:2},1024),p(o,{class:"_row"},{default:m((()=>[p(i,{class:"font-14 color-black font-weight"},{default:m((()=>[x(C(t.$util.thousandSeparator(e.new_price,e.decimals)),1)])),_:2},1024)])),_:2},1024),p(o,{class:"_row"},{default:m((()=>[p(i,{class:I(["font-12 font-weight",e.change_rate>=0?"price_up":"price_down"])},{default:m((()=>[x(C(e.change_rate)+"% ",1)])),_:2},1032,["class"]),p(o,{class:"check-box"},{default:m((()=>[e.select?k("",!0):(y(),_(n,{key:0,src:q}))])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)):k("",!0)])),_:1}),t.currency.length||0!=t.contract.length?(y(),_(o,{key:0,class:"add-button"},{default:m((()=>[p(u,{height:"78rpx",radius:"78rpx",color:"var(--background-primary)",background:"var(--content-primary)",size:"26",onClick:e[6]||(e[6]=e=>t.selectMine())},{default:m((()=>[x(C(t.$t("index.add_own")),1)])),_:1})])),_:1})):k("",!0)])),_:1})):(y(),_(o,{key:1,class:"card-list"},{default:m((()=>[p(o,null,{default:m((()=>[p(U,{width:750,height:500,visible:0===t.mList.length,title:t.$t("list.not_data")},null,8,["visible","title"])])),_:1}),(y(!0),b(v,null,w(t.mList,((e,s)=>(y(),_(o,{key:"m"+e.id,class:"coin-item",onClick:s=>t.toKline(e.id,1)},{default:m((()=>[p(o,{class:"coin-item-cell"},{default:m((()=>[p(o,{class:"_row"},{default:m((()=>[p(i,{class:"font-14 color-black font-weight"},{default:m((()=>[x(C(e.symbol),1)])),_:2},1024),0==t.symbolIndex?(y(),_(i,{key:0,class:"font-12 color-gray ml-5"},{default:m((()=>[x("/ USDT")])),_:1})):k("",!0),1==t.symbolIndex?(y(),_(i,{key:1,class:"font-14 color-black font-weight"},{default:m((()=>[x("USDT ")])),_:1})):k("",!0)])),_:2},1024),p(o,{class:"_row"},{default:m((()=>[p(i,{class:"font-12 color-gray"},{default:m((()=>[x(C(t.$util.bigNumberToString(e.quota)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),p(o,{class:"coin-item-cell"},{default:m((()=>[p(o,{class:"item"},{default:m((()=>[p(o,{class:"_row"},{default:m((()=>[p(i,{class:I(["font-14 color-black font-weight",e.change_rate>=0?"price_up":"price_down"])},{default:m((()=>[x(C(t.$util.thousandSeparator(e.new_price,e.decimals)),1)])),_:2},1032,["class"])])),_:2},1024),p(o,{class:"_row"},{default:m((()=>[p(i,{class:"font-12 color-gray"},{default:m((()=>[x(" ≈"+C(t.symbol)+C(t.$util.thousandSeparator(t.symbol_rate*e.new_price)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),p(o,{class:"item"},{default:m((()=>[p(o,{class:I(["tag-box",e.change_rate>=0?"bg-green":"bg-red"])},{default:m((()=>[p(i,{class:"font-12 font-weight always-white"},{default:m((()=>[x(C(t.$util.thousandSeparator(e.change_rate))+"% ",1)])),_:2},1024)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}))])),_:1})):k("",!0),1===t.active?(y(),_(o,{key:1},{default:m((()=>[p(o,{class:"card-list"},{default:m((()=>[p(o,null,{default:m((()=>[p(U,{width:750,height:500,visible:0===t.currency.length,title:t.$t("list.not_data")},null,8,["visible","title"])])),_:1}),(y(!0),b(v,null,w(t.currency,((e,s)=>(y(),_(o,{key:"tl"+e.id,class:"coin-item",onClick:s=>t.toKline(e.id,1)},{default:m((()=>[p(o,{class:"coin-item-cell"},{default:m((()=>[p(o,{class:"_row"},{default:m((()=>[p(i,{class:"font-14 color-black font-weight"},{default:m((()=>[x(C(e.symbol),1)])),_:2},1024),p(i,{class:"font-12 color-gray ml-5"},{default:m((()=>[x("/ USDT")])),_:1})])),_:2},1024),p(o,{class:"_row"},{default:m((()=>[p(i,{class:"font-12 color-gray"},{default:m((()=>[x(C(t.$util.bigNumberToString(e.quota)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),p(o,{class:"coin-item-cell"},{default:m((()=>[p(o,{class:"item"},{default:m((()=>[p(o,{class:"_row"},{default:m((()=>[p(i,{class:I(["font-14 font-weight",e.change_rate>=0?"price_up":"price_down"])},{default:m((()=>[x(C(t.$util.thousandSeparator(e.new_price,e.decimals)),1)])),_:2},1032,["class"])])),_:2},1024),p(o,{class:"_row"},{default:m((()=>[p(i,{class:"font-12 color-gray"},{default:m((()=>[x(" ≈"+C(t.symbol)+" "+C(t.$util.thousandSeparator(t.symbol_rate*e.new_price)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),p(o,{class:"item"},{default:m((()=>[p(o,{class:I(["tag-box",e.change_rate>=0?"bg-green":"bg-red"])},{default:m((()=>[p(i,{class:"font-12 font-weight always-white"},{default:m((()=>[x(C(t.$util.thousandSeparator(e.change_rate))+"% ",1)])),_:2},1024)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):k("",!0),2==t.active?(y(),_(o,{key:2},{default:m((()=>[p(o,{class:"card-list"},{default:m((()=>[(y(!0),b(v,null,w(t.contract,((e,s)=>(y(),b(v,{key:"ft"+s},[p(o,null,{default:m((()=>[p(U,{width:750,height:500,visible:0===e.currency.length&&t.findex===s,title:t.$t("list.not_data")},null,8,["visible","title"])])),_:2},1024),t.findex===s?(y(!0),b(v,{key:0},w(e.currency,((s,a)=>(y(),_(o,{key:"cl"+e.id,class:"coin-item",onClick:a=>t.toKline(s.id,e.id,e.currency_type)},{default:m((()=>[p(o,{class:"coin-item-cell"},{default:m((()=>[p(o,{class:"_row"},{default:m((()=>[p(i,{class:"font-14 color-black font-weight"},{default:m((()=>[x(C(s.symbol)+"USDT ",1)])),_:2},1024)])),_:2},1024),p(o,{class:"_row"},{default:m((()=>[p(i,{class:"font-12 color-gray"},{default:m((()=>[x(C(t.$util.bigNumberToString(s.quota)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),p(o,{class:"coin-item-cell"},{default:m((()=>[p(o,{class:"item"},{default:m((()=>[p(o,{class:"_row"},{default:m((()=>[p(i,{class:I(["font-14 font-weight",s.change_rate>=0?"price_up":"price_down"])},{default:m((()=>[x(C(t.$util.thousandSeparator(s.new_price,s.decimals)),1)])),_:2},1032,["class"])])),_:2},1024),p(o,{class:"_row"},{default:m((()=>[p(i,{class:"font-12 color-gray"},{default:m((()=>[x(" ≈"+C(t.symbol)+C(t.$util.thousandSeparator(7*s.new_price,2)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),p(o,{class:"item"},{default:m((()=>[p(o,{class:I(["tag-box",s.change_rate>=0?"bg-green":"bg-red"])},{default:m((()=>[p(i,{class:"font-12 font-weight always-white"},{default:m((()=>[x(C(t.$util.thousandSeparator(s.change_rate))+"% ",1)])),_:2},1024)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)):k("",!0)],64)))),128))])),_:1})])),_:1})):k("",!0)])),_:1},8,["style"])])),_:1},8,["style"])])),_:1},8,["data-theme"])}],["__scopeId","data-v-a6df2031"]]);export{A as default};
